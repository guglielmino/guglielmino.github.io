{"componentChunkName":"component---src-pages-archive-js","path":"/archive/","result":{"data":{"site":{"siteMetadata":{"title":"Gumino.com","author":"Fabrizio Guglielmino","labels":[{"tag":"raspberrypi","tech":"Raspberry Pi","name":"DiRasberryPi","size":20,"color":"orange"},{"tag":"React","tech":"React","name":"DiReact","size":20,"color":"deepskyblue"},{"tag":"nodejs","tech":"Node.js","name":"DiNodejsSmall","size":20,"color":"lightgreen"},{"tag":"git","tech":"Git","name":"DiGitMerge","size":20,"color":"white"},{"tag":"javascript","tech":"JavaScript","name":"DiJsBadge","size":20,"color":"yellow"},{"tag":"css","tech":"CSS","name":"DiCss3Full","size":20,"color":"teal"},{"tag":"python","tech":"Python","name":"DiPython","size":20,"color":"deepskyblue"},{"tag":"ruby","tech":"Ruby","name":"DiRuby","size":20,"color":"crimson"},{"tag":"java","tech":"Java","name":"FaJava","size":20,"color":"wheat"},{"tag":"angular","tech":"Angular","name":"DiAngularSimple","size":20,"color":"red"},{"tag":"html","tech":"HTML","name":"FaHtml5","size":20,"color":"darkorange"},{"tag":"php","tech":"php","name":"DiPhp","size":20,"color":"violet"},{"tag":"mongodb","tech":"MongoDB","name":"DiMongodb","size":20,"color":"green"},{"tag":"vscode","tech":"VS Code","name":"DiVisualstudio","size":20,"color":"deepskyblue"},{"tag":"linux","tech":"Linux","name":"DiLinux","size":20,"color":"deepskyblue"},{"tag":"apple","tech":"Apple","name":"DiApple","size":20,"color":"white"},{"tag":"swift","tech":"Swift","name":"DiSwift","size":20,"color":"white"},{"tag":"android","tech":"Android","name":"DiAndroid","size":20,"color":"white"}]}},"allMarkdownRemark":{"totalCount":8,"edges":[{"node":{"excerpt":"Air Pollution monitor - part 1 This is the first part of two articles on monitoring air pollution with a DIY smart sensor. Air Pollution is a topic about which everyone heard something at least once‚Ä¶","html":"<h1>¬†Air Pollution monitor - part 1</h1>\n<p>This is the first part of two articles on monitoring air pollution with a DIY smart sensor.</p>\n<p>Air Pollution is a topic about which everyone heard something at least once (I'm sure nobody heard about it ONLY once :-) ). It's a very important topic and we need to care a lot more about it.</p>\n<p>COVID-19 global emergency forced everyone to wonder what are root causes for a so scaring plague. Viruses are always been part of human life but what we figured out in this case is they can hit very hard. We are a technological society, and before the emergency we were strongly convinced to be able to control nature (hey, we went on the Moon! How, a very small piece of proteins, can hurt us?).</p>\n<p>Science is trying to find a way to manage the emergency, finding a vaccine is one of the priorities right now. At the same time a long debate has started, to understand what environment conditions helped in spreading the Virus around so fast. There are for sure a lot but many scientists seems to agree about one: <strong>Air Pollution</strong></p>\n<h2>Air pollution, does we need to care about?</h2>\n<p>Air pollution is a term to indicate presence in the air of substances potentially harmful. There are a lot of substances that can be defined with this term but two are very dangerous: <strong>PM10</strong> and <strong>PM2.5</strong> </p>\n<p>I'm not the right person to give a full description on what these substances are, and why they are so dangerous, there are a lot of trustable source for that, let's spend only a few words about. Firts of all PM means Particulate Matter (or Pollution Matter), the number after the PM word indicate the size in micron of the particle. So PM10 means a Particle Matter with size up to 10 micrometers. To give a simple comparision a human hair diameter is 50-70 micron.</p>\n<p>Now, there are many sources for these particles, naturals like soil erosion, and artificials like domestic heating, traffic, industry and so on. Of course, there are a lot of studies on the effect of human health caused by the PMs, and its internationally recognised that effects are very bad.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 572px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/09f87d7e48682d4864d443e65087bfdf/a805e/air_pollution_image1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.1171875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAA7EAAAOwwHaapjcAAACVklEQVQoz2WSz08TQRTH+VO8eeImBAVjjAmpMcGfBw568WRMEA4IAo20YmiNQSyVAAmkbfjRAyJQjAR/VIGi0CKN2FZRIPUHLKXbdne7087M7uy67GBL4eUdZubt55vv2/eK1AOh6EEI0c4QpJnf0WxayBXUI1F06E6/4TLIPb/c5BozOydMbY71KKM9EnJYogDmeT4S/vpsfPqqbeS01VVqdRXf7TpmqL1gcQ77Q7LuSDkK0ycEs8YhT3GNpeSevbrvxf3x9ybP3A2Hp8LqLG93mEZn4jEm5y4PU9WZyObJlp6K+q7HE7NpiGgJQNT74fMlc395Q+f1Wqv33ZLeAtmHqZBEyK3B6ZLWPsvU3J6covJY5pBMtDJRjAOTZXVPj5+74xiaycP0H2CYfeNbPGPuPm9zh7fimhMmJSJZkRSF4QCR5HCUqWx3nG3rX99N7sE6tW+bYDT1cbms4UlVvf1ndFsQYSwp0OYSnMhyIsDSTefLcqvr08bfApievrNcZafbYOwJBNdSQgbIRNVnnoBYsxj8tW3oGCpt6Z4MhAphvYHZhdUT9bZTjXa769UOw8ZZDiEsCGA7luR5IIrZ6gcDV1ptb30L2lDo4lB4Tybg/9b4aLDO1H/xWvNK8EdOlMaCb3XMM9/60BlcWeN4MQ/nBr20GG5q7h0eec3GOVqmujuxZNXlpts1HaPPvVpubGwVwvo8/Zs7WkZ2hYyiHlwmTJTZUNT7ZTMmqwm5cMMySBIhFiCOQ8xCiQGQBRBALP5PIYtTkpyQ5D8c2BKAkEUAYUVV/gHNndLgQpOIQwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"EEA Signals 2013\"\n        title=\"EEA Signals 2013\"\n        src=\"/static/09f87d7e48682d4864d443e65087bfdf/a805e/air_pollution_image1.png\"\n        srcset=\"/static/09f87d7e48682d4864d443e65087bfdf/01e7c/air_pollution_image1.png 512w,\n/static/09f87d7e48682d4864d443e65087bfdf/a805e/air_pollution_image1.png 572w\"\n        sizes=\"(max-width: 572px) 100vw, 572px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Source <a href=\"https://www.eea.europa.eu/media/infographics/air-pollution-from-emissions-to-exposure/view\">EEA Signals 2013</a></p>\n<h2>You can't control what you don't measure</h2>\n<p>Given the premise it's quite obvious that monitoring PM10 and PM2.5 is fundamental, in fact many governments have programs about air pollution monitor, with control units around the country. Control units are normally displaced in the center of big cities and their data isn't always public accessible.<br>\nThe project presented here is a way to allow anyone to contribute to a open and distributed network of air quality sensors, providing public accessible data.</p>\n<p>The idea is quite simple: using a ESP32 SoC and a air quality sensor, we'll sample data and send it to a IoT platform. In this first part we'll focus on reading data and displaying it, next part focus on sending data to a IoT platform.</p>\n<p>So, what PM10 and PM2.5 ranges are considered dangerous? There indications are called AQI (Air Quality Index) and index levels depends on the region. </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 607px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 85.9375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAAEFUlEQVQ4y12Ue0yVdRjHaWvrT1fU1sWpzXVZhdM2FwIJioIcJnlsNhuCJdZsA+ufNnUmpjhQMdFoqz+yraarDTEhL6BEGjDEIEkDDufynivn8p5zOHfk+ul5z3Hierfn/f3z23ffz+/7PE/a7OwsTqeT0dFRxsbGmJqaStbk5CQzMzP4fD4sFgt2u51wOMz09PTDO1rNzc2haWin9qVpv1gshqqqyTMUieDxevEHA3hVHzabVQRNyXLYbYSCQQJy1+v2EItGIaWTPDXRNP73xYLjeG02JqMirvqJhCew2b24XAHCsUmcfj9RcTZsNhKeiKOOqwyNDuHxu1MONbsRcaXhTNy/T19Apc1lp8froNM6jMPXi1NpweG4TFjpInC9A0/HDdobzzD4aye3W/tp/qaZ/ksDJEIJ0rR3sigKZpOJkCBXhdxsGB9DP9KJvu8X/jCVknBkERzPI9qUD/otGLMK+G7BShqeLKL6lVqOvFbHnmf3o9yyphwqIuiSYCZEvMqtUOi2UGrqYuedFtruleP+N4uAP49YazFU7EIp0PPD0gIaF+o5kdvIscwT7HnuC6x9tgeCVit+eehpedTdUZXiiIdNIx0U956j21rOlDuHQHANsab1UFyCcdV6Gh57lZMLCtm36BD7F1ez94VHBB3iziai0YkEn4a9FI27eNeQQr5pLiduzyYQEIcXi2Dze5hzCvk2PZOGp4o4IMgHXz7MvoUH5pFNJq0l7CQkvUqXmYIxE+XmHj4ebOHq3TLG7mnIucSuvAO7KrGuKebcyi2celrH8ZzTnMw7TfVLh7H0KvPIEUl5RmKvivrQPUDWPUTOTiGfF+SSzZgklK+fyJhHXiTIzz+CrKVsGBkhJm2z2+9kg2pjq/Em7/ef53dDGUFTtjS+ILfooGwHllwdZ15cx6l0HTUr6qldcZT9Sw7OIxtk7DxuN7PisNJtpdCjJFPe8fdFrg2V4RvJQvUJ8uWN8NEnWNdu5KeMEhEsou6tBo6v+ooDSw+h9IqgNi5emVcNWXNYpTn0Oyg1/skmCaXTWEbInI3Xk0c86fDDlMMl+clQapbXU/NG7TyyJhgSsXAohBoaF4cKBV6FnUov2wcu0Da8De9wtiyOXOJXSpIObetKOLtcn3RYvzrVh1rK1r4HyFaZXS3laUH+TKZE57NRbuxi20CzONxOyLJats5a4pdE8IOdKIKsNfapZ4o5lHGMI8vqkshJQW30DAYDbm11ycqoEIeZtmG2mbrZ2t9Eyz96nHeWyYp7k3irjF55BZaVeXy/OJ9jj7/Nl68fpSajls/T92LutqQcBmUlJRIJJmQH9sQjtEt1qHbaXaO4gjeYjFwiGr1CzHSVqWvX8f92lbs/XmDwbBu3fv5Lqk/qNhE1yn9J8y38opRDgwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"European Index Levels\"\n        title=\"European Index Levels\"\n        src=\"/static/e4ef20982d5c8f8642998b45a82bd5f8/ef9e5/air_pollution_image6.png\"\n        srcset=\"/static/e4ef20982d5c8f8642998b45a82bd5f8/01e7c/air_pollution_image6.png 512w,\n/static/e4ef20982d5c8f8642998b45a82bd5f8/ef9e5/air_pollution_image6.png 607w\"\n        sizes=\"(max-width: 607px) 100vw, 607px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>\nSource <a href=\"https://airindex.eea.europa.eu\">European Environment Agency</a></p>\n<p>As you can see in the table, in the European Union, recomended maximum concentration for PM2.5 is under 20¬µg/m3 and under 40¬µg/m3 for PM10. Those levels changes a little bit for other areas but in general they aren't so different.</p>\n<h2>Introducing the project: hardware required</h2>\n<p>Defined what we want to achieve it's time to get what we need. In fact we need only two components: the ESP32 SoC and the sensor.\nESP32 is available in many flavours, we'll use a powerful device expressly thought for rapid prototyping and testing: M5Stack. </p>\n<h3>M5Stack, army knife for IoT</h3>\n<p>ESP32 doesn't need presentation, in the last few years it becomes one of the main player in IoT world. In our case we are going to use the M5Stack, that is a small device, based on a ESP32 boundled with a lot of peripherials.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 487px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/175fa3236b220d11149e2aafa9a00e7d/f67dd/air_pollution_image7.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 98.76796714579056%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB7OGWMdhRV4CQf//EABsQAAICAwEAAAAAAAAAAAAAAAEDAhEEEBIA/9oACAEBAAEFAmMiuK8jrWSnsxubAKHqA1//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAeEAABAwQDAAAAAAAAAAAAAAARAAISARAgIjFRgf/aAAgBAQAGPwIuqtmx6tLlAnxDD//EABsQAQACAwEBAAAAAAAAAAAAAAERIQAQMbHR/9oACAEBAAE/Ia1D3CItPpadJDmBz5lJpOtDI8cNCGAJ7r//2gAMAwEAAgADAAAAEOjIPP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EAB4QAQABBAMBAQAAAAAAAAAAAAERACExQRBRYXHB/9oACAEBAAE/EH5gsG10dtAxXY0NX0/aEcUZJiL5j0b9oShCQ3rI5/aPBkDhxccoMvH/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"M5Stack Internal\"\n        title=\"M5Stack Internal\"\n        src=\"/static/175fa3236b220d11149e2aafa9a00e7d/f67dd/air_pollution_image7.jpg\"\n        srcset=\"/static/175fa3236b220d11149e2aafa9a00e7d/f67dd/air_pollution_image7.jpg 487w\"\n        sizes=\"(max-width: 487px) 100vw, 487px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 466px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6b7353f2a28d2238fa50ccb926e3d650/1b529/air_pollution_image8.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 86.69527896995709%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAARABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAQCBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAbMJTqtiiUKwf//EABoQAAMBAQEBAAAAAAAAAAAAAAECAwAEEjH/2gAIAQEAAQUCp0klW8ZehSLw00ZssQBo/d//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAfEAABAgYDAAAAAAAAAAAAAAAAAQIDEBESIXFBUYH/2gAIAQEABj8Cth+uUqj93cmaouhXNOzMn7l//8QAHBAAAwEAAgMAAAAAAAAAAAAAAREhACAxQXHR/9oACAEBAAE/ITOangesq0+2MZLQoQSxwWiO52PuOIhnLFhUUeD/AP/aAAwDAQACAAMAAAAQMA8A/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAHxABAAEDBQEBAAAAAAAAAAAAAREAMXEhQVFhoSCB/9oACAEBAAE/EBNJoLRdN3NIqd4qO+MntKVeliHMWqXOSoT0Rs9qDmyEki6Jpm/EVJzvoofnxn//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"M5Stack\"\n        title=\"M5Stack\"\n        src=\"/static/6b7353f2a28d2238fa50ccb926e3d650/1b529/air_pollution_image8.jpg\"\n        srcset=\"/static/6b7353f2a28d2238fa50ccb926e3d650/1b529/air_pollution_image8.jpg 466w\"\n        sizes=\"(max-width: 466px) 100vw, 466px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>We are going to use it to read data from the sensor and displaying PMs values on his screen. Since ESP32 is equipped with WiFi the next step will be to connect it to the internet, and send data acquired to an IoT platform, visualizing pollution information on the web.</p>\n<p>To program the M5Stack we are using Arduino IDE as development environment, that's a good choise for fast prototyping a solution.</p>\n<h3>SDS011 air quality sensor, measure PM10 and PM2.5</h3>\n<p>Sampling air pollution is today quite simple because the introduction of small components specialized on this topic. For our project we selected the SDS011.</p>\n<p>SDS011 sensor is able to measure PM10 and PM2.5 in a quite reliable way.\nIt uses a laser scattering principle as described in the <a href=\"https://www-sd-nf.oss-cn-beijing.aliyuncs.com/%E5%AE%98%E7%BD%91%E4%B8%8B%E8%BD%BD/SDS011%20laser%20PM2.5%20sensor%20specification-V1.4.pdf\">datasheet</a>. In simple terms there is a correlation between laser waveform and particle diameter, SDS011 is able to measure vaweform changes and give back a (quite precise) estimation on particles in ¬µg/m3.</p>\n<p>Let's get out hands dirty playing with the sensor ü§ì</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 600px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5e49fc7194587f1118a90bdb0d3f18df/b4294/air_pollution_image2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGQABAQEAAwAAAAAAAAAAAAAAAAMCBAUG/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB7icOAehTFcBoH//EABsQAAIDAAMAAAAAAAAAAAAAAAECAAMEEBIT/9oACAEBAAEFArLVSV6EcTTm9ZRlICL1WEcf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAGxAAAgIDAQAAAAAAAAAAAAAAAREAMRAgQWH/2gAIAQEABj8CTDuXhi4eH2Aaf//EAB0QAAICAgMBAAAAAAAAAAAAAAABESEQMVFhcaH/2gAIAQEAAT8hsFGj4JclE50XvvG656EG5H7iRrH/2gAMAwEAAgADAAAAEIAHPP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EACAQAQABAwQDAQAAAAAAAAAAAAERACExEEFhgVFxkfD/2gAIAQEAAT8QRQpZGBleKtXyBRsT53O6AShOKgJlEIwUzZx0/SguMpMg/Zn1QqKAXV3QFq22mzp//9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Sensor Image\"\n        title=\"Sensor Image\"\n        src=\"/static/5e49fc7194587f1118a90bdb0d3f18df/b4294/air_pollution_image2.jpg\"\n        srcset=\"/static/5e49fc7194587f1118a90bdb0d3f18df/36dd4/air_pollution_image2.jpg 512w,\n/static/5e49fc7194587f1118a90bdb0d3f18df/b4294/air_pollution_image2.jpg 600w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>SDS011 comes provided with a handly TTL to USB adapter, that means it can be connected to a computer to read data from it. In my case, I used <a href=\"https://freeware.the-meiers.org/\">CoolTerm</a> but it can be used any serial port terminal. It could be necessary to install driver to support the USB to serial adapter, that depends on the operating system used.</p>\n<p><img src=\"/static/d6e636ee2eb07183f595afb3575de2bb/air_pollution_image3.gif\" alt=\"Sensor serial data\"></p>\n<p>Connected the sensor and opened the serial port (connection parameter are 9600 N81) we can see the data coming from it. It sends 10bytes on a 1Hz frequency following the the schema below. </p>\n<table>\n<thead>\n<tr>\n<th>Header</th>\n<th>Cmd</th>\n<th>DATA1</th>\n<th>DATA2</th>\n<th>DATA3</th>\n<th>DATA4</th>\n<th>DATA5</th>\n<th>DATA6</th>\n<th>Checksum</th>\n<th>Tail</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>0xAA</td>\n<td>0xC0</td>\n<td>0x??</td>\n<td>0x??</td>\n<td>0x??</td>\n<td>0x??</td>\n<td>0x??</td>\n<td>0x??</td>\n<td>0x??</td>\n<td>0xAB</td>\n</tr>\n</tbody>\n</table>\n<p>Important data for our scope are DATA1 and DATA2, where PM2.5 value is stored and DATA3 and DATA4, where PM10 is. Both are stored in a 16 bit word in little endian order, so PM2.5 low byte is DATA2 and high byte is DATA1, same for DATA3 and DATA4 for PM10.</p>\n<p>Given a sample from our connection we can calculate PM2.5 and PM10 values as follow.</p>\n<pre><code>PM2.5 = ((DATA2 * 256) + DATA1) / 10\nPM10  = ((DATA4 * 256) + DATA3) / 10\n</code></pre>\n<h2>¬†Let's start</h2>\n<p>Before starting we need to setup the environment, we need the Arduino IDE and enable it to write code for the M5Stack. The procecure is very well described <a href=\"https://docs.m5stack.com/#/en/arduino/arduino_development\">here</a> then I assume that everything is already setup.</p>\n<p>As seen before, using the air quality sensor is very simple, for our project we want to create a smart sensor, able to show information about pollution and send it to the cloud without a PC.</p>\n<p>Let's start wiring the sensor, as shown in the following schematic it is trivial, in fact we 4 wires only, two for the power, taken directly from the M5Stack, the other two for UART RX and TX.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 2048px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a25a5fb0887890bbd581df51b26c1a85/318af/air_pollution_image4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.96875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAACmFAAAphQGPVf7hAAACSUlEQVQoz3WS3UuTYRjG37P071DWh5IfWDpzutzUfTbndLrctJmYIFRgIJ1G54U4D6IDbdZEp4uUIlexhCiNZtskgpgoDcJpmJ+bte3X62sGHXTBxfPcJz+u53puIRAIMDw8jNlsRq/XY7FYpPlAmUzmn3P2hR9NtZImrYZbVQp6as9xtbaeS6LralR0tdsRwuEILpcLQRAkZ2dnMzAwIAGS+yl2Egm293ak2ffczRlFDgXHT2HSadCqVRg1dagqFeTJcmg2FiNEwmH6+/v/Ao9lZeEadEmAr+sbxH8s8X3rG3vJDbwv3VQZSqkqldNgMtLR3obd1oJGXY1CXkqHQSkmDH3E6/XS6nDgsFpptdkYdA1KwLXNTdLpDfHN0sj7cR+dSjUavZaeri56r1+j70YvLU2NYmIdfTU6hGAwSGRxkc+ih+7e4Up3NyOjIyR+JliJx0gkV8mkDoHz3jEuKyup02qxN1txtjlwOuyYLxgxir32qc8juN0PeDc3x7PpacpkMvRiNz7PPRbe+Pk0/4rY8hf2fx0SF6Ym6VRVoDMYcLZepFWEHril0SJ1edMgAkOhENFolOjSEv6ZGWbFX1+LxQ4j7SaJfQiyvBhhZ3Wdt0MDWEtyOZmXj8lswiBuhUnsskalJF+Wy+2KQgT+o8yf4va2t4mtrLC7uYV75D6FxScoLyjAebaE+rIiGsoqqS0pp+h0Hja5HCGdTnPkVColOSPeD3bvaP+OFI/HmfBO8NQ3SXDUQ2D8Ia/HHuOfmMLjecST6Sl+A5nb9rv1FE4YAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Wiring\"\n        title=\"Wiring\"\n        src=\"/static/a25a5fb0887890bbd581df51b26c1a85/a878e/air_pollution_image4.png\"\n        srcset=\"/static/a25a5fb0887890bbd581df51b26c1a85/01e7c/air_pollution_image4.png 512w,\n/static/a25a5fb0887890bbd581df51b26c1a85/2bef9/air_pollution_image4.png 1024w,\n/static/a25a5fb0887890bbd581df51b26c1a85/a878e/air_pollution_image4.png 2048w,\n/static/a25a5fb0887890bbd581df51b26c1a85/318af/air_pollution_image4.png 2553w\"\n        sizes=\"(max-width: 2048px) 100vw, 2048px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Time to write some code. Application core is reading data from the serial interface, for that Arduino library for M5Stack provides some global objects bound on the UART ports. As visible from the schematic, we are using pin 16 and 17 of M5Stack, these pins are bound to RX and TX of <code>Serial2</code>. The last info we need is the serial speed, num bits, parity and stop bit, this is specified in the SDS011 datasheet as: 9600, 8bits, no parity 1 bit stop, so to initialize the communication we have:</p>\n<pre><code>Serial2.begin(9600, SERIAL_8N1, 16, 17);\n</code></pre>\n<p>Reading the SDS011 message is matter of a single call of the Arduino Stream class.</p>\n<pre><code>// buffer to store the SDS011 message\nbyte buffer[10] = {};\n\n// Marker byte for SDS011 message end\nbyte DATA_END_MARK = 0xAB;\n\nSerial2.readBytesUntil(DATA_END_MARK, buffer, 10);\n</code></pre>\n<p>As we know from the sensor's datasheet, it sends a messages composed by 10 bytes with 0xAB as ending byte marker. The code above is an implementation to read a single message.</p>\n<p>Of course, reading the message is the first step, we need to extract and convert data from the raw buffer in meaningful PM2.5 and PM10 values.</p>\n<pre><code>float pm25 = ((buffer[3] * 256) + buffer[2]) / 10.0;\nfloat pm10 = ((buffer[5] * 256) + buffer[4]) / 10.0;\n</code></pre>\n<p>Easy enough, it's a trivial conversion from a little endian 16 bit word and a division.</p>\n<p>At this point the worst is over, we can show on M5Stack display the values, and using the M5Stack library this is pretty straightforward.</p>\n<pre><code>M5.Lcd.clear(WHITE);\nM5.Lcd.setCursor(5, 10);\nM5.Lcd.printf(\"PM2.5 %.2f ug/m3\",airQuality.pm25);\nM5.Lcd.setCursor(5, 40);\nM5.Lcd.printf(\"PM10  %.2f ug/m3\",airQuality.pm10);\n</code></pre>\n<p>And here the result</p>\n<p><img src=\"/static/62718678303f6ee253b4752628dbb317/air_pollution_image5.gif\" alt=\"Air Pollution Monitor\"></p>\n<h2>Tesing and moving ahead</h2>\n<p>To test the device we need a source of air pollution (it should be easy enough to find one :-) ). One simple way is to put the sensor close to a car exhaust muffler or close to a cooking pan and see how values grow up very quickly.</p>\n<p>We achieved or first goal, reading and displaying PM2,5 and PM10 values next step is to transform it in a IoT sensor, trasmitting data to a cloud IoT platform and displaying the informations on the web, stay tuned!</p>\n<h3>Hardware components</h3>\n<table>\n<thead>\n<tr>\n<th>Component</th>\n<th>Quantity</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><a href=\"https://www.digitspace.com/sds011-air-quality-sensor-module?0c8bd709c6a0e011\">SDS011 Air Quality Sensor Module</a></td>\n<td>x1</td>\n</tr>\n<tr>\n<td><a href=\"https://www.digitspace.com/products/wireless-iot/wifi/esp/m5stack-esp32-grey-development-kit?0c8bd709c6a0e011\">M5Stack ESP32 GREY Development Kit</a></td>\n<td>x1</td>\n</tr>\n</tbody>\n</table>\n<h1>Sources</h1>\n<p><a href=\"https://github.com/guglielmino/air_pollution_monitor\">Project source code</a></p>","id":"3b030902-e0f3-5bb3-8e81-d4f1adc190f3","frontmatter":{"title":"Air Pollution monitor - part 1","date":"May 25, 2020","tags":["esp32","arduino"]},"fields":{"slug":"/air-pollution-monitor-1/"}}},{"node":{"excerpt":"Writing Apps for Apple TV for fun and (no) profit A new AppleTV On 9th September 2015 Apple announced a new version of Apple TV, the fourth-generation, and it brings a long awaited feature: Apps. Many‚Ä¶","html":"<h1>Writing Apps for Apple TV for fun and (no) profit</h1>\n<h2>A new AppleTV</h2>\n<p>On 9th September 2015 Apple announced a new version of Apple TV, the fourth-generation, and it brings a long awaited feature: Apps.</p>\n<p>Many times I asked myself why Apple didn‚Äôt enabled Apps on Apple TV. Advantages are obvious to me: iOS is one of the most widespread mobile OS and the one with highest number of Apps. Porting Apps to Apple TV can be really simple and this make it the platform for TV with the higher number of Apps.</p>\n<p>Eventually Apple did it and better than I could imagine. Apps for Apple TV can be made with classical approach, like we develop native Apps for other iOS devices, or in a new way based on a specific markup language and JavaScript. The latter is really interesting and at the same time strange for Apple standard, what I‚Äôd like to do in this article is make a simple example to explore this new way.</p>\n<h2>TVML, TVJS and TVMLKit</h2>\n<p>Apps made with this new way use three new technologies, precisely TVML, a markup language made to create the UI (TVML stands for TV Markup Language). TVJS, a  JavaScript API to display and interact with TVML, and TVMLKit, the native layer to combine all together.  I‚Äôm a big fan of learning by examples approach so let‚Äôs start with a sample.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1072px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/12fa73910060c28125ee12a8faaa2918/d5bfb/appletv-image1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.890625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAADgUlEQVQ4y63O60+aZxgGcLMl+1uWxXUeBioTRKwHVA7DUyujVt9WMDLUtFMUhKHWKqAVxkFdWetWeeuJNhZpu2q3zqXQ1DpsjYvJviidW7a5D2u/dH14rr1C/4TdyZX7fp4Pv1wZ62uhuh/XH7Q+jMZaYtEoE43FmGj0IXMrvMKEw2EmshJhVt7ctyMrzNrqKrOx8Zh5wiW++YTZim+2bD+N6+KbG8KMo6mUKf+qP6lBw8lTONXUDLWmmdstYJgzqfdRGOYstFotOg16mI3n4Ri2IuCxY+kbL24vBrC1vozw9clQCszMLtjL4QvB5d/cPCEpLCohZeWVRKFQkrpaFSk+Xk4qKquJUqkknzQ2EL22hdh6DcQzYiJfuWxkPuB4tbo0heDkxbkUeIwnTOQKipGTL07mFoipUFJOxaVVVFRSSWXKGlotV9EqLqebNLTrUy21GDuoc9BIXSP9NDg1SucCjtd35v244h6YT4Hv5QgSx/hFeJ8vTGblFSErTwy+qBSFEilEJVKUSeVQfFwLtVqN9razsPZ2wtxtQH9PJzgQc5ftJPT1JXjtpjT4brYgkcnjQJ4omZUvRq5AggJxObiWOF4hA9cQtXX1aD6tAdcQlp4OXLCcw6itB1c9Q5jxXiDBaTvGBrvTYGYWP/EBrxDZeaIkTyBG3kfFEEkqUCrlMIUKcq5dfcMJMM1N6GzXou9cO4ZMXXBwoOuiiWtmJl67BdZufRosE36YqJGKUCHOT1ZJCnCmQYrWRjk+0zXC3quFy9YB/8h5BMaMmPVZEboygsisHZFrDgR9Nsx6LORO0A526vM0aGYqEwNtSjQpipKyYh49UZFPra0y2tYgoVeHGLowpqN2QzUd1pXRS53VdGZATa85W+nuDz76z/5d+uK3+wTYwZ+Jb9Pg2uWuvbBHj2mL5vXihJ4ERtvJT7dGyU5khDya7yfLbh3xG1Vk2lRDAiYV8RhKyDAjIF/2ykk8ZCF/RCdevdyZwc/fua+nwEfL7sPnj4PY5/L71hJe7t3D33v3cbj/AId73+NgN4Lnz0JIxBfw6/ZNHGzfwMHTRezGZvHL5jz2ny3hReIuYvd8yynQ4zBN+Mb6F7xOc9DjNLGu0R7W7exjPW4b6/cNsxPjZnZizMS6j7ajl/Vx/14u095BdtLL3V9Yg5N+243x8T59xpt5m8s7/0PeApDxHy+kI+rQQol6AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"A simple tvOS App\"\n        title=\"A simple tvOS App\"\n        src=\"/static/12fa73910060c28125ee12a8faaa2918/d5bfb/appletv-image1.png\"\n        srcset=\"/static/12fa73910060c28125ee12a8faaa2918/01e7c/appletv-image1.png 512w,\n/static/12fa73910060c28125ee12a8faaa2918/2bef9/appletv-image1.png 1024w,\n/static/12fa73910060c28125ee12a8faaa2918/d5bfb/appletv-image1.png 1072w\"\n        sizes=\"(max-width: 1072px) 100vw, 1072px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Before starting make the example a few words on TVMLKit App‚Äôs architecture, this kind of Application is made of two parts: one native and one JavaScript.</p>\n<p><img src=\"./appletv-image2.png\" alt=\"Architecture\"></p>\n<p>In a nutshell native code is something like a container which load startup JavaScript and give control to it. JavaScript and resources can be loaded from a remote server (ie a web server) so our App can be remotely updated after released on the App Store without making a new submission (this is one reason because I wrote this model is strange for Apple). So we‚Äôll start making the native part, I assume You have XCode 7.1 or higher.</p>\n<p>Launch XCode a choose tvOS Single View Application.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1112px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1827a5e484bd6e74242896fc8dfb2982/3fca6/appletv-image3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 80.859375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAACDUlEQVQ4y5VTy67aQAzlO6q2/3Olu6jU7tNuovuTrNgjEIiSUKmtaIAAeb9I5uEeDwxKdEvVWhxNcDzHPrYz8n3v7WG/fzkcDm4Yhm4SJ+75fL4hMr4/4XgM3WAfurvd3t3h3AaHl5X37f3oq7d5VppIKUWXy4WKoqSqqqgGyrKAX5IxrfFjkDnp9nxpOwO2ted/Gvn+5qmqaiYReZ6LNE1llmVSdJ1Mi0YWjZAdnpOskkgq60snQWgADo7lO11ZlrRerz+MNpvNE1cGQg2nxkudJKkWQuq27cwZRZH+/uOnRpw+nk5aKa6NDEDId1Rd1+R53pCwKAq+TOgf1U1zlUZ0k/oabFDFpKpB/IAQGUy2X9stbYEoiklKObhsre9LkoSLeE1oJedZhqCU0Df6F4vjWEPRY0JUaSSzj8GBbduaingT+mDfQ8lMyC9Z5j07ZB/DI3FfS16jojBJrGw2O5SHhDwtWx1XxtL5tL4+mIQJs9uUB2tjhpJm+nQ6UQrZmLgBktyf+z5UZVoTYyhZlivm8H1/SHjro8n+aFUshBCmerRIC6w8y8d2DAktKQLvi/sIircbhnZofFWGMAiCKyH3AmSSAULVXQP+CnCZUwrJJu6E0P3Mf+wq9Kf8vwbJH0fj8fjNfD7/DDiM2WzmLJdLByvgYGrm7IN9KMJZLBbOdDp1VquVxZfJZPLuNzuenvQf+ZZSAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Architecture\"\n        title=\"Architecture\"\n        src=\"/static/1827a5e484bd6e74242896fc8dfb2982/3fca6/appletv-image3.png\"\n        srcset=\"/static/1827a5e484bd6e74242896fc8dfb2982/01e7c/appletv-image3.png 512w,\n/static/1827a5e484bd6e74242896fc8dfb2982/2bef9/appletv-image3.png 1024w,\n/static/1827a5e484bd6e74242896fc8dfb2982/3fca6/appletv-image3.png 1112w\"\n        sizes=\"(max-width: 1112px) 100vw, 1112px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Standard template for tvOS Application includes some files we don‚Äôt need, so first operation is to trash <code>ViewController.swift</code> and <code>Main.storyboard</code>, these will be not used in our example. We need to change some settings too, default template is made to use storyboard UI, we removed Main.storyboard and so delete ‚ÄúMain‚Äù in Main interface setting (You can also remove this by opening Info.plist file and removing ‚ÄúMain storyboard file base name‚Äù key). </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1072px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/86f59895da4e9dac718e0fefc0c8f538/d5bfb/appletv-image4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.28125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAACZElEQVQ4y62RzW7TQBSFDaJrNojwGDxDH4FtglQV1FpBghdgQ6tuYMUbIIVIoVLTqptGUdpVYRFWgUZVSew0KU4dx47t+H9+fLkzKVUlygpGOpqZO+Nvzj1WPr3+sDQ8+VI6G56Wx8bl+mg0UofDoarputr7caaenw/UvqbJ2tS21clkImVZE1UbXqqji5/qYDBY6/f7rzqdzmPlxWr5wfeTk2A6m4LrujBzZ2A7DkRRCFFKwfV8XEfAeQ55nsPNQSjHOoc4juW+2+1uKavP1EL37HTc6XwDTdOIZVnMNE3mOTbzg5ilhLM0TRljnCVxwgihDCEsTVIU7rOMZXhBAD8fH28o68/Lhel0bI7GlzA2DJ4kSY7nORJyLmyhL3S4UBznQRDkWZYJqzdFBPDw8HBDWXv5rnAx+GoaFzqYpsVFe4sW+XVrwoCDMeBjgK4AgdgukxFcxSCBR0dHm0qp9LTgOLaJjsQHEigyIYRIkKhLKELCKEZF4AcReDGXsKuHbwKLCHQkEGHXQAHzfR/XC1ckCIALhQFk8xDmEZXd3uKwdCuQUirdJejM1nWYGwZkeJanCSR+CNb5BHlc/v3fwFar9XegcIg/QOY5m80gQqWo2LZhPrXBD8kfDtvt9qZSLBYf2rZtiMDDMCQoihBKMkIxfKkwCKnnz6kfBBRjoPM4o4ZLaM4ZRSNCiQD2er03ysrKyiPP82L4D0PX9bfK8vLy/e3t7fc7Ozu13d3dj/V6vVqr1aoHBwdVzKTabDarjUbjWvv7+9W9vT05izuihnMF79YrlcoTBccd1F3U0j/qnmD9ApPsU4O3PPHVAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"appletv image4\"\n        title=\"appletv image4\"\n        src=\"/static/86f59895da4e9dac718e0fefc0c8f538/d5bfb/appletv-image4.png\"\n        srcset=\"/static/86f59895da4e9dac718e0fefc0c8f538/01e7c/appletv-image4.png 512w,\n/static/86f59895da4e9dac718e0fefc0c8f538/2bef9/appletv-image4.png 1024w,\n/static/86f59895da4e9dac718e0fefc0c8f538/d5bfb/appletv-image4.png 1072w\"\n        sizes=\"(max-width: 1072px) 100vw, 1072px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Last operation is to permit to the App to make HTTP requests to outside world, with iOS 9 Apple introduced transport security setting and by default it blocks all networks requests. So open Info.plist file and add <strong>App Transport Security</strong> Setting like in the following image (<strong>‚ÄúAllow Arbitrary Loads‚Äù</strong> set to YES is the mandatory part).</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 912px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bb027e80abef0dc18bd18b28a6025c0b/8b69f/appletv-image5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 94.53125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsSAAALEgHS3X78AAACN0lEQVQ4y9WTT3PSQBTA0RHboeHQnq0fxLP3ZhyP8gH8EHVGz8DAR/HozUtxRh3Q2mmBBDSB/CMhYTehQLK7z90QSkXUYXryzfwmycvLb99LNrkcj/b7t08+fHn3/LKjniiKKne6iqyovZSuosjNZktutlpy6+s5v1blNr/fWXPCedbudJ8+On58T/geDHtXDQAKAQoBT3yIkAmB76XgSQDeyAHE8/FiBiRZAInXiJyIYOwZR4eHkhDuf7rUzjR3Dt96TtIZ+NTw57RvIaoYiKoWpqqJqRMBtUOgFmabEH8BoFqh9nD/4CgVXvSdhjL04fNFn5x3h0w1Atbj/HAipo0ifgyZGcTMQgnjp8zG9BaETmKAK32sc9dS6I6cxiQIwLFtAozyARhMoxAW8xlEGMFA08AYDMD3XJhfT9P7ad0S8QCvx7okZR3att1wRx70+9+J7wfAGAOMQ140BYQQeN4YptNrSJIECCFAueMWqTAMQ71YLK6FaILAMAximRZEUcQF05TZbA5xHKcvfkP0ixBjrBcKhaXQNM3GyBmBrg+IYzsQ8u74iqlYIM7/JeST6Ht7e0uh53mN7AEixhWIOjGeGFN0uMpvshLyhdcjj8fjVMgLSHaEzdiWy/I3QkmSfhf+qZOVdAt/F8KO8Z8KV185e4e7xtYOz7IFE7F7diSdiv8E2o3Qdd2PcMfgm99aCfPlcvlFrVZ7U6lUTjmvduS0Wq2+rtfrL/P5/EGuVCrlsrh/R9L4CbROvQD9OWPOAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"appletv image5\"\n        title=\"appletv image5\"\n        src=\"/static/bb027e80abef0dc18bd18b28a6025c0b/8b69f/appletv-image5.png\"\n        srcset=\"/static/bb027e80abef0dc18bd18b28a6025c0b/01e7c/appletv-image5.png 512w,\n/static/bb027e80abef0dc18bd18b28a6025c0b/8b69f/appletv-image5.png 912w\"\n        sizes=\"(max-width: 912px) 100vw, 912px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>Let‚Äôs write the code</h2>\n<p>Now it‚Äôs time to modify AppDelegate, we have to delete all methods put by XCode, import TVMLKit and make AppDelegate class conform to TVApplicationControllerDelegate.</p>\n<pre><code>import UIKit\nimport TVMLKit\n\n@UIApplicationMain\nclass AppDelegate: UIResponder, UIApplicationDelegate, TVApplicationControllerDelegate {\n    var window: UIWindow?\n}\n</code></pre>\n<p>In this state our App isn‚Äôt able to do much so we need to add the code to bootstrap the JavaScript which represents the real core of the App. What we need to do is create a TVApplicationController giving to it necessary info to load the JavaScript code which handle UI.</p>\n<pre><code>import UIKit\nimport TVMLKit\n\n@UIApplicationMain\nclass AppDelegate: UIResponder, UIApplicationDelegate, TVApplicationControllerDelegate {\n\n    var window: UIWindow?\n\n    var appController: TVApplicationController?\n    static let TVBaseURL = \"http://localhost:9001/\"\n    static let TVBootURL = \"\\(AppDelegate.TVBaseURL)/app.js\"\n    \n    func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -> Bool {\n        window = UIWindow(frame: UIScreen.mainScreen().bounds)\n        \n        // Controller context for loading JavaScript\n        let appControllerContext = TVApplicationControllerContext()\n        // Url from which to load javascript\n        appControllerContext.javaScriptApplicationURL = NSURL(string: AppDelegate.TVBootURL)!\n        // BASEURL variable will be available in the JavaScript code\n        appControllerContext.launchOptions[\"BASEURL\"] = AppDelegate.TVBaseURL\n        \n        // Standard controller for tvOS Apps based on TVMLKit\n        appController = TVApplicationController(context: appControllerContext, window: window, delegate: self)\n        return true\n    }\n}\n</code></pre>\n<p>First we set two variables with the base URL where to load scripts from, TVBaseURL, and the URL of the bootstrap script, TVBootURL. After we need to implement didFinishLaunchingWithOptions, this method is called on Application start and here we did two logical operations:</p>\n<ul>\n<li>Create a TVApplicationControllerContext used to load JavaScript</li>\n<li>Create a TVApplicationController, passing to it the previous TVApplicationControllerContext, to handle Application lifecycle\nThat‚Äôs all we need for the native part of our App, now it‚Äôs time to move to the JavaScript side.</li>\n</ul>\n<h2>The JavaScript side</h2>\n<p>Native part of App loads a simple JavaScript, creates a new folder in the root of the project where to put the code. Call it ‚Äújs‚Äù, now creates a app.js file and put the following code in it.</p>\n<pre><code>App.onLaunch = function(options) {\n  var menu = mainMenu(); \n  navigationDocument.presentModal(menu);\n}\n \nvar mainMenu = function() {\n  var tvmlCode = `&#x3C;?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n   &#x3C;document>\n   &#x3C;mainTemplate>\n      &#x3C;background>\n         &#x3C;img src=\"https://c1.staticflickr.com/7/6050/6350327968_33f008d9c2_b.jpg\" />\n      &#x3C;/background>\n      &#x3C;menuBar>\n         &#x3C;section>\n            &#x3C;menuItem>\n               &#x3C;title>PLAY&#x3C;/title>\n            &#x3C;/menuItem>\n            &#x3C;menuItem>\n               &#x3C;title>SCENES&#x3C;/title>\n            &#x3C;/menuItem>\n            &#x3C;menuItem>\n               &#x3C;title>EXTRAS&#x3C;/title>\n            &#x3C;/menuItem>\n         &#x3C;/section>\n      &#x3C;/menuBar>\n   &#x3C;/mainTemplate>\n&#x3C;/document>\n`\n    var parser = new DOMParser();\n    var menuDoc = parser.parseFromString(tvmlCode, \"application/xml\");\n    return menuDoc\n}\n</code></pre>\n<p>As I already wrote JavaScript is the real core of our application. <code>App.launch</code> is the entry point of the code, it‚Äôs called when the script is loaded by <code>TVApplicationController</code>. In launch there is a first interaction with TVJS API, <code>navigationDocument</code>. This object is used to present views on the screen in few different ways, it‚Äôs something comparable to <code>UINavigationController</code> if You wrote some native code for iOS.</p>\n<p>The code is pretty simple, launch method calls mainMenu function, this function uses DOMParser to make a document object starting from a TVML template. The interesting part is tmvCode variable which contains TMVL code to make the user interface. TVML is a custom XML which defines the UI elements, it starts alway with <document> element and contains many different children elements who renders on the screen in different ways. In our simple case we used <background> to put an image on the background and <menuBar> for the menu on the bottom of the screen (menuBar is a complex element with a three of children for define the inside items). A full documentation of TVML is available on <a href=\"https://developer.apple.com/library/tvos/documentation/LanguagesUtilities/Conceptual/ATV_Template_Guide/\">Apple Developer Site</a>.</p>\n<p>Now we are ready to try our simple App, in the native part we used an URL to load app.js, so we need to serve this script using a web server. The simplest way to make this is to use python which is installed by default on Mac OS X. Before running the App from XCode launch the Terminal and go in the folder with app.js, from here type the following command</p>\n<pre><code>python -m SimpleHTTPServer 9001\n</code></pre>\n<p>This command runs a simple web server listening on port 9001 serving files from current folder. Started the web server run the App from XCode the App and it‚Äôll be executed on Apple TV simulator or on the real device if connected to the Mac.</p>\n<h2>Conclusion</h2>\n<p>his article is a simple introduction on how simple can be write Apps for tvOS, make real applications it‚Äôs obviously more complicated than this. In a future article I‚Äôll describe how to use NodeJS as backend for a TVMLKit App using a template system to handle dynamic TVML generation.</p>\n<p>Source code of the app can be found <a href=\"https://github.com/guglielmino/tvOSSample\">here</a>.</p>","id":"3507272a-3431-5a55-8c9d-4630857503b7","frontmatter":{"title":"Writing Apps for Apple TV for fun and (no) profit","date":"January 03, 2016","tags":["swift","apple"]},"fields":{"slug":"/writing-apps-for-apple-tv-for-fun-and-no-profit/"}}},{"node":{"excerpt":"Linking iOS App from Web Nowadays almost all web sites  match with a mobile Application. Users jump from web to Apps and back, making this experience as fluid as possibile is becoming really important‚Ä¶","html":"<h1>Linking iOS App from Web</h1>\n<p>Nowadays almost all web sites  match with a mobile Application. Users jump from web to Apps and back, making this experience as fluid as possibile is becoming really important. In this post I‚Äôd like to explain the standard approach to this problem and how I get an enhanced solution to it.</p>\n<p><img src=\"/static/d727c5cf1c93072815cb6e58cf5a4096/linkios-image1.gif\" alt=\"Link animation\"></p>\n<h2>Standard approach</h2>\n<p>Before describing the standard approach we need to explain how an iOS App can be launched from a web site and how this is typically used.</p>\n<p>iOS Apps comes with a configuration file named Info.plist who gives all the parameters needed by the iOS runtime to execute the App itself. Some of these parameters are  App name, supported screen orientations, default language and many others. One of these is URLscheme  who is a powerful system to launch the App from outside.</p>\n<p>Looking to a snippet of Info.plist took from my App Pushetta it looks as follow:</p>\n<pre><code>&#x3C;key>CFBundleURLSchemes&#x3C;/key>\n&#x3C;array>\n&#x3C;string>pushetta&#x3C;/string>\n&#x3C;/array>\n</code></pre>\n<p>What this mean? It simply says the App can be executed with a custom url, in this case the url is pushetta://. So first step is now clear, if a web page has a link with this url schema, loading it on a device with the App installed and using the link the App is started. WOW this is great!!! But wait a moment, if the App isn‚Äôt installed? Ehm, we get an error.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 640px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2ba3da3d1c8344a23391efd1e380856f/c08c5/linkios-image2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 177.5390625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAkABQDASIAAhEBAxEB/8QAGQABAQADAQAAAAAAAAAAAAAAAAMBAgQF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAABouIKDt284VSGAAf/xAAcEAACAgIDAAAAAAAAAAAAAAAAAgERAxITICH/2gAIAQEAAQUCooo0auNiY1lJXS0Mvr9v/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwFf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwFf/8QAHBAAAgEFAQAAAAAAAAAAAAAAAAERECAhMkGR/9oACAEBAAY/Aqyc9IYpZsYv/8QAHRAAAwABBQEAAAAAAAAAAAAAAAERURAgQWGRcf/aAAgBAQABPyHwfRInLCj70B/IEclOZFiejqjVTf8A/9oADAMBAAIAAwAAABAQBzwAD//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QX//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QX//EABwQAQADAAIDAAAAAAAAAAAAAAEAESExQSBR8P/aAAgBAQABPxDXxg92jyVAL7uGkOJSQZAsuACNRoF1dyswUTCbAtuD3zi8VAsb8LlvvuC7s//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Link animation\"\n        title=\"Link animation\"\n        src=\"/static/2ba3da3d1c8344a23391efd1e380856f/c08c5/linkios-image2.jpg\"\n        srcset=\"/static/2ba3da3d1c8344a23391efd1e380856f/36dd4/linkios-image2.jpg 512w,\n/static/2ba3da3d1c8344a23391efd1e380856f/c08c5/linkios-image2.jpg 640w\"\n        sizes=\"(max-width: 640px) 100vw, 640px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Error is self explaining, we tried to open an url Safari doesn‚Äôt understand. This freezes our initial enthusiasm.</p>\n<p>The standard solutions comes in mind is to check if the App is installed before running the custom url. BEEEEEEEP!!! This isn‚Äôt possible! For (obvious) privacy problems a web page can‚Äôt inspect the device to known if a specific App is installed.</p>\n<p>Ok, so we are at dead end, we know how to execute the App from web page but we don‚Äôt know how to be sure is installed before this.</p>\n<p>Some clever people made a work around to this problem with a trick based on JavaScript setTimeout function. The idea behind the solution is: we start a timer that when expire executes a function whose redirects the user to a predefined url (it can be for example a landing page with info about the App and a link to the store). Right after the start of the timer the script try to launch the App with the custom url, so we get two scenarios:</p>\n<ul>\n<li>App is installed: it runs and the timer never fires (this because running the App brings the user outside the browser)</li>\n<li>App isn‚Äôt installed: we get the error but after awhile we get redirected to a predefined page</li>\n</ul>\n<p>The code for this solution is</p>\n<pre><code>   setTimeout(function(){\n                window.location = \"http://www.pushetta.com\";\n              }, 1000);\n   document.location = \"pushetta://\";\n</code></pre>\n<p>The code make exactly what we described: it sets a timer function that after one second (1000 milliseconds) redirects the user to <a href=\"http://www.pushetta.com\">http://www.pushetta.com</a>. Next it tries to run pushetta:// custom url scheme and this implies the two scenarios described.</p>\n<p>This is a pretty poor solution, it works but with a bad user experience. This is where I started to look for a better solution, googling around wasn‚Äôt productive so I decided to make some tries. My starting point was: I can‚Äôt check if the App is installed but if I could handle the error on opening a wrong url this would be enough to resolve the problem. This is simplest to say that to do, window.location gives an error when we try to open a wrong url but it seems not trappable by code. So how can we do? The solution I used is based on a iframe. As many know an iframe is something like an hole (squared) inside the page who loads another url, the idea is: if I create an iframe in the DOM with it‚Äôs src set to the custom schema, will it show the error popup when the schema is wrong (ie the App is not installed)? Luckily enough this doesn‚Äôt happen and so we can implement the right solution based on this behaviour.</p>\n<pre><code>// timer func to bring the user to a web page if App isn't installed\n   setTimeout(function(){\n            document.location = \"http://www.pushetta.com\";\n        }, 1000);\n\n   // put an iframe in the DOM with \"pushetta://\" as src (and 0x0 dimensions)\n   ifrm = document.createElement(\"IFRAME\"); \n   ifrm.setAttribute(\"src\", \"pushetta://\"); \n   ifrm.style.width = 0+\"px\"; \n   ifrm.style.height = 0+\"px\"; \n            \n   document.body.firstElementChild.appendChild(ifrm);\n</code></pre>\n<p>The solution seems to work well but I consider it a test to be verified with various scenarios.</p>","id":"8a5e66e5-3698-592f-980e-94c66a54fafc","frontmatter":{"title":"Linking iOS App from Web","date":"July 30, 2015","tags":["apple","swift"]},"fields":{"slug":"/linking-ios-app-from-web/"}}},{"node":{"excerpt":"VoCore as smart sensor Some days ago I received my VoCore, this device is amazing it‚Äôs a full embedded Linux device with  OpenWrt, WiFi and Ethernet on board and many I/O (i2c, GPIO, SPI, UART‚Ä¶","html":"<h1>VoCore as smart sensor</h1>\n<p>Some days ago I received my VoCore, this device is amazing it‚Äôs a full embedded Linux device with  OpenWrt, WiFi and Ethernet on board and many I/O (i2c, GPIO, SPI, UART, ..). Its main strengths are size and WiFi on board. About size look at the following picture.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 600px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/067103f6575038e74ec26eccc1e58000/b4294/vocore-image1.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 133.3984375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAbABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAQL/xAAVAQEBAAAAAAAAAAAAAAAAAAADAf/aAAwDAQACEAMQAAABW9Gg9RodiuQ5L2dhz//EABsQAAICAwEAAAAAAAAAAAAAAAERAAIQEyFB/9oACAEBAAEFAtoeOILZKhSgFRjwT//EABYRAAMAAAAAAAAAAAAAAAAAAAECIP/aAAgBAwEBPwEtH//EABYRAQEBAAAAAAAAAAAAAAAAABARMf/aAAgBAgEBPwGUw//EABsQAAEEAwAAAAAAAAAAAAAAABEAARAhICKB/9oACAEBAAY/Atmm0wHIpHH/xAAeEAADAAEEAwAAAAAAAAAAAAAAARExECFBYVFxkf/aAAgBAQABPyG0wF9FgrLSmKx0k8Wmz33pJOXJt4qZ3gzj7MD/2gAMAwEAAgADAAAAEIsAcf/EABcRAAMBAAAAAAAAAAAAAAAAAAEQESH/2gAIAQMBAT8QkYpi/8QAGBEAAwEBAAAAAAAAAAAAAAAAARARITH/2gAIAQIBAT8QE7xHFX//xAAcEAEBAQEBAAMBAAAAAAAAAAABEQAhMUFRkbH/2gAIAQEAAT8QfSs9To4dEQPRG3P6ZtEoi4X5dMGSJIPp/WKlDmROlevDUKz5TrjpEC2GJZMfqtzv/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"VoCore size\"\n        title=\"VoCore size\"\n        src=\"/static/067103f6575038e74ec26eccc1e58000/b4294/vocore-image1.jpg\"\n        srcset=\"/static/067103f6575038e74ec26eccc1e58000/36dd4/vocore-image1.jpg 512w,\n/static/067103f6575038e74ec26eccc1e58000/b4294/vocore-image1.jpg 600w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>For a maker a device like this is awesome, combine connectivity and power in a so small size can open infinite possibilities but the first that comes to mind is smart sensors.</p>\n<p>Smart sensor is a generic term, my own interpretation is about a device can acquire some physical data, elaborate it and communicate over the internet. What I‚Äôd like to present in this post is a simple use of VoCore as smart sensor.</p>\n<h2>Configuring OpenWrt</h2>\n<p>Before starting we need to configure OS, I chose to use Python for implementing the smart sensor logic.</p>\n<p>VoCore is shipped with a release of OpenWrt doesn‚Äôt carry Python, so here the step to install it, I skip basic VoCore setup because can be found on VoCore site. Next steps assumes You are able to connect via ssh to VoCore and it has a internet connection enabled.</p>\n<p>OpenWrt uses a package manager called opkg, like many others it uses a list of repositories urls where look for packages. These urls are defined in /etc/opkg.conf and in default configuration isn‚Äôt present the repository for python.</p>\n<p>So first step is to add a new repository url, add the following line to the end of <code>/etc/opkg.conf</code></p>\n<pre><code>src/gz cheese_packages http://downloads.openwrt.org/snapshots/trunk/ramips/packages/packages\n</code></pre>\n<p>After this we need to update opkg cache with following command</p>\n<pre><code>root@OpenWrt:~# opkg update\n</code></pre>\n<p>And finally we are able to install python</p>\n<pre><code>root@OpenWrt:~# opkg install python\n</code></pre>\n<p>Ok, less is done üôÇ</p>\n<h2>Making the sensor</h2>\n<p>Now it‚Äôs time to work on hardware, what I‚Äôd like to make is a simple intrusion detection system that sends a push notification when someone get in the room. To send push notification I‚Äôll use Pushetta, a service I made specifically to solve this task.</p>\n<p>A PIR sensor is used to detect movements, this kind of sensor use infrared radiation to detect temperature changes in a specific range.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 150px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/719c42509c585a0ab9a2c1098b43c27d/8a4e8/vocore-image2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAADGElEQVQ4y42V709TVxjH+y/sja+WvdMX2xszfWFizEyUbNGoifJiwcWMLFOWRTeMJr7wByYqmUGRYUfxQlv6C2p/0B+0/G6Ray2zzKgRSyRxI9FlsVQnA4S2t5/dW2i5lKI8yZNz7rnP8znfc885z9WwHssuOap2DdOsys1mc67uF3tx3JrA9SR8KGYVUN0q9m5ujmQiwdSrBO9m50rGquM1pWZVLJVKMRGP87soIg4M5lzpTzyNk1pYWFOARg2TJKkAG41GudvfT0wcZjQSIRa5R+TOMOLgIA/ux5hXQdUMTfESFHv+bIKBQIB7oRARGRCV25Gw3JdbMTRIqLeX8fh4LjaTyawAa/LKMlmJ5FSS8bGnRMNh+ruCBDs9BFxu+nx+wt3dhHu66QsEZWAfd+QJ3s7OrIJqpKxUUBYdFrltsdLr9+N3eTAbTFgEI167iz6vj5Csutvnw9vpJejvos4q8OJNIpebXoLmFPY+EDlUd5La+it0tnfgdjiwWe20tJoQdAaMggw22rCaOjBbOmi/7cLr8WAxmznbUs/k1N+FPcgBh2J3+ahiOzsPH+BizVnsFhsGWV1TUws3tS003pRdq0erMyLoLVjb7TidTgZ6+nH5vJSd/55Hfz1bVJiXqjXcYlNFGV9VlnOptoZ2Bao30qwT0DW3IrS2YZHVuRxuurxe3E4HeoPAhas1fHxwG0drq5eA6XSu03ztFlt27GTjd19y6NuvEeobCMjfskfehKD8/brcndhtZm401PHz6RNUnfqR6stnaDDpGHl4n+npfxc3Jb9Dzg4Pn234nPJjlWyu2seeHypo0jZy7fovHD9Xzf6qw+zYu5svdu9Cb2rjn6lEyWupyZ+/jJQhmXzNH2KMsooDbD6yi29+quTSr7U4wgHqGxuwGU2MDg2tACiClNwVB1t5kDKLx2fs4RiffrJVXtpvK2Z/82KSV5N/8vL5BAvz84sVrfjKZllWmH+ZTqd48jjOf9OzhUMryeNvXyeZm5kpXM91ly+1qZPfF1cSqFaqLL+4kqxVZD9csSmdtDz2/n/A/zVDlXq2fvqUAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PIR sensor\"\n        title=\"PIR sensor\"\n        src=\"/static/719c42509c585a0ab9a2c1098b43c27d/8a4e8/vocore-image2.png\"\n        srcset=\"/static/719c42509c585a0ab9a2c1098b43c27d/8a4e8/vocore-image2.png 150w\"\n        sizes=\"(max-width: 150px) 100vw, 150px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>PIR sensors are cheap and really simple to interface with a microcontroller, there are only three pins. Two are VCC and GND and the last one is the OUTPUT.</p>\n<p>In the following video I show how it works, I‚Äôm using a portable oscilloscope connected to the PIR sensor. As You can see when something move in sensor‚Äôs range output level goes high (+5V) and return low after a while.</p>\n<p><a href=\"https://www.youtube.com/watch?v=0LSoy9gvT6g\"><img src=\"https://img.youtube.com/vi/0LSoy9gvT6g/0.jpg\" alt=\"IMAGE ALT TEXT HERE\"></a></p>\n<p>What we want to do is read PIR output and send a push notification when it changes to high.</p>\n<h2>Sending notifications with Pushetta</h2>\n<p>To send notification we‚Äôll use a web service I made called Pushetta, this is made of a web site and two Apps (one for iOS and one for Android).</p>\n<p>First we need to register on <a href=\"http://www.pushetta.com\">Pushetta</a> web site, it‚Äôs free and it‚Äôs a mandatory step to be able to send notifications.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 500px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/04ab87031f59627699db13c04cad29de/0b533/vocore-image3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABcUlEQVQoz5WSTU7DMBCFfRikFm6A4BBcj78FSGw4AEnKCirBgkVZIJVl101KSNzYTlw9M+MmaWhTJCJ98c+89xR7IgbjSxyNr3D2do/T11scPJ1j+HyBQc2Q6n2w75A4frnBCfk4g/eEsRWY70JiqVWLVAXSPIOuSl831Vq3jaK6smW7FsWyAKP8uHTNmubQShEaRntcs7/RrH2q4xGSXrvQ19KYJAniOMZ8PvfwXlEU6PesESRyLKzxcyklNB37czrF+2SC2WzGgU7TV5Zl6UO7+q5fbG20sOkrTZEsFjRXsKuVMxSmza9A/Cswl2SkMG0qH6RLagKNy/2B+DOQR0WNqajDDVtH7g3cucP28ukuFXWYQwjXBvbo2yNnWQYmz3M0c4bDUrpD7rKkGjfpbrrA9UeMjNZ5vtF2vcI5h87jF7zHWP6ZjYG1FtXKuliVSHTlZbXPNdoaJ6Iowj7CMEQQBJ6HIHCjKMTjqK71eUj/A+aHdZ0XzqubAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Pushetta signup\"\n        title=\"Pushetta signup\"\n        src=\"/static/04ab87031f59627699db13c04cad29de/0b533/vocore-image3.png\"\n        srcset=\"/static/04ab87031f59627699db13c04cad29de/0b533/vocore-image3.png 500w\"\n        sizes=\"(max-width: 500px) 100vw, 500px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>After signup process we need the API key, this is the key used to call Pushetta service and send notification, it‚Äôll be used in code we‚Äôll write after.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 500px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/14b98e4f586a337c460333c40ec6f8b1/0b533/vocore-image4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.599999999999994%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB6UlEQVQoz42S227TQBCG/QA53JInoPSKay55B56uSEhccMU7gJoDTdMnIE4apYocmsTH9Z5s/9uZNbhBQqhxPu2//8yOZ1YOPtx9de/nX/B6fIXL8Ue8OePi+qrTlxNaz+D9BfnvZp/xdvrJaz4fbKMdTlmKUkmPkGWrtUIhBQTpmOK6sjCEPoP3sjKtritPUOcxbBHDyBRG5TCmgGVIW5WhsQKoSlRa/pOasIryZUbkCHZ7hXBT4ueqwHIrsYo0lrvWW20EHqIa0cGhbhyccwDOcK1ndAldJkSKoBTaicJCFAZZqpAlEnlG4+aGfcdrmkpoRV0a6shqNLVxvFoqZKlDQ51xMUNdBnl6QhI/UoGYErXH6oKKtj5jtUBDd6XKnPZHHA+P9PIYNXkVFTY0clcwiiJstw+UmLYjETVd8np9j/X9Bvv9LyilfYwPh2GIZbjC6RR7j7F+5N8Fm6bpAqzpTwcNrLWdzw/HfDfG/JXPP57geeTk6LLkACno06CRNN2HLBKwl9K4ZZ44VWZg/uRI0epnP6EzsSfQ9GnURtAbqaNGwdVEo73nfZg29l+qjuDHzRiL2ykWN1PMJt8xHX/DfHaNu9uZZzHn2OTFBKPRyI1ejTAcDtHv9zEYDPza6/WIPmvH+5fyBL+jRg2dXl+zAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Pushetta API Key\"\n        title=\"Pushetta API Key\"\n        src=\"/static/14b98e4f586a337c460333c40ec6f8b1/0b533/vocore-image4.png\"\n        srcset=\"/static/14b98e4f586a337c460333c40ec6f8b1/0b533/vocore-image4.png 500w\"\n        sizes=\"(max-width: 500px) 100vw, 500px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Last step is to create a channel. Channel is something like a topic used to send notifications. User want to receive notifications have to subscribe channel interested in, using <a href=\"http://www.pushetta.com/pushetta-downloads/\">Pushetta Apps</a>. More informations about how Pushetta works can be found on <a href=\"http://www.pushetta.com\">www.pushetta.com</a>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 500px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/05bf183cbfa4d06dea8540c20bbd18d5/0b533/vocore-image5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.39999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABxklEQVQ4y41TS24UMRDtMyVIrDkDF+BeLJhEQmzCJhLKmsUMbJAQi4iIKCELiJKebv/a3+5+psrT81NGCraequyqeq6yy9Xrbx/x5vs5Xn45xdFihuMJR/N3e/J4PsOLxckTcMyrr+8LWK+0t2iMQkwRMQZ470jGIlOf4JxFCB7GaIw8x4Ew7iHRXir7A6rQSej2EUbWMKJGp5ZwpoU1gjBJ3ZY9T3pBJ7b6ek2IVqFypDTLR7RNjWX9gD4FoI/I0SInt0EfLLzrEPwhsM3AW4kqkWPOGSmlIj9dnOPs8xwnNxGnPxVmVxpvLxV+NLHYR+QiN5jWXHp0lGGkE8iLtlEM1ze/cH33G7dLjb/a48Em3HcRXRyKDwceGuMwIDBhIkL2sZbS9h593yPRo2S64F1wANsYT0nzlpAz5LRDCIVQa0UvauBId86VgxisF1j3POE2b5TshmG/NdY2TCX/HyE5cZbWeeq/VVnDVOYu4aHBFXIPEmHelDxOhOvXW7mt5nMj72doslQqSylzK2T+cFljcdfAKgkhNshCkpSrtVzrFMNxQohMPylHrzlDasjpwvnyr2qDP5Kb1W0fwrm8ox9E+bJO4x8fO9h5ofRzwAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Channel creation\"\n        title=\"Channel creation\"\n        src=\"/static/05bf183cbfa4d06dea8540c20bbd18d5/0b533/vocore-image5.png\"\n        srcset=\"/static/05bf183cbfa4d06dea8540c20bbd18d5/0b533/vocore-image5.png 500w\"\n        sizes=\"(max-width: 500px) 100vw, 500px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Now we are ready for the last step: connect PIR sensor to VoCore and write a few lines of Python code to handle all the logic.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 600px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cc7a2e267d5c674481a501f7d6ebd40e/0a47e/vocore-image6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.6640625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAACmGAAAphgEi7N+MAAABUElEQVQoz51Sa4+CQAzk//88ieYiuidwn8hJZHntczimZo0Y/XJNml1KO512NsM/zRqLcRwxTROMMZjnGc45ZJ8KQggPjzE+fFkWKd7lO9Q/Neq6xuFwQJ7nOJ/P7wFZyCJrrTg7e+eFifMO7bXF/rgXcHqysizvgOnHcjcB9N4/knnym2x5n8YJ6lvJnbFE4nK5IOOFDBKTlMDvlCgg84S+7xFigO61FCdA5vAUQK01uq7DMAxy3m43cevshuFsZlkDz+a3wVEdnycTl5HZlUoRmEHdaXwVX7B+ZRghwHHtTobMYw53SREoCFlVVQWlFIqiQEZmDDKB4OMw4qROK5CRQj1oBB/QXBthl1iTLZ9NcuLIs+GYDCRF27ZFWZUwKyCFoLrcDwvSfl+E3HjGMQhKdhybC09qPhcTnMt/fV6vlr3rIsmIG5WHcdiM/Mn+AAaGWCw0zasbAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Schema PIR ‚Äì VoCore\"\n        title=\"Schema PIR ‚Äì VoCore\"\n        src=\"/static/cc7a2e267d5c674481a501f7d6ebd40e/0a47e/vocore-image6.png\"\n        srcset=\"/static/cc7a2e267d5c674481a501f7d6ebd40e/01e7c/vocore-image6.png 512w,\n/static/cc7a2e267d5c674481a501f7d6ebd40e/0a47e/vocore-image6.png 600w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>In the picture there is the schematic used for our experiment. Connecting PIR sensor is really simple, I used GPIO0 as input in the VoCore module. Whit this circuit GPIO0 is put to low when PIR signal is up and vice versa. Must be taken into account that PIR sensor require +5V as power source, on VoCore can be used USB+ pin.</p>\n<p>Before writing full Python program is better to test that everything is working as expected with a simple shell script, first step is login on VoCore via ssh and change directory to GPIO0 sys filesystem as follow.</p>\n<pre><code>root@OpenWrt:~# cd /sys/class/gpio/\nroot@OpenWrt:/sys/class/gpio# ls\nexport      gpio13      gpio18      gpio21      gpio24      gpio7       gpiochip0\ngpio0       gpio14      gpio19      gpio22      gpio25      gpio8       gpiochip22\ngpio12      gpio17      gpio20      gpio23      gpio26      gpio9       unexport\n</code></pre>\n<p>If we see an output like the one above we are in the right place and next step is to change dir  to gpio0.</p>\n<pre><code>root@OpenWrt:/sys/class/gpio# cd gpio0/\nroot@OpenWrt:/sys/devices/10000000.palmbus/10000600.gpio/gpio/gpio0# ls\nactive_low  device      direction   edge        subsystem   uevent      value\n</code></pre>\n<p>Two files are important for us, <strong>direction</strong> is the first one. We need to put the string ‚Äúin‚Äù inside to this to set GPIO0 in input mode (we need to read from it). The other one is value, <strong>value</strong> is 0 when GPIO0 is low and 1 when high.</p>\n<p>Coming to the script we can use the one below, it simply read value every second.</p>\n<pre><code>while  [ 1 ]\ndo\n  cat value\n  sleep 1\ndone\n</code></pre>\n<p>Executing it console shows something like:</p>\n<pre><code>1\n0\n0\n0\n0\n0\n0\n1\n1\n1\n0\n0\n1\n</code></pre>\n<p>0 mean PIR is sensing motion, else nothing is moving around it, all works fine!</p>\n<h2>Becoming a smart sensor</h2>\n<p>Now the code, I found an already made wrapper for interacting with GPIO made by Stefan Wendler and to not reinvent the wheel I use this, is called DigitalIO and I put it on github with all the code of this article.</p>\n<p>This wrapper makes really simple to read GPIO status, with the following five line of code we can print on console the GPIO status read every half second (something like we made with shell script).</p>\n<pre><code>pin = DigitalIO.get_input(GPIO0)\nwhile True:\n    read = pin.state()\n    print \"GPIO0 state = \" + str(read)\n    time.sleep(0.5)\n</code></pre>\n<p>Last piece of code we need is the one used to send the notifications, we make a function to solve this task later used in final code.</p>\n<pre><code>def sendNotification(token, channel, message):\n    data = {\n        \"body\" : message,\n        \"message_type\" : \"text/plain\"\n    }\n\n    req = urllib2.Request('http://api.pushetta.com/api/pushes/{0}/'.format(channel))\n    req.add_header('Content-Type', 'application/json')\n    req.add_header('Authorization', 'Token {0}'.format(token))\n\n    response = urllib2.urlopen(req, json.dumps(data))\n</code></pre>\n<p>With all piece in our hands it‚Äôs time to assemble all together and make real our smart sensor.</p>\n<pre><code>pin = DigitalIO.get_input(GPIO0)\nwhile True:\n    read = pin.state()\n    if read == 0:\n       print \"Something move\"\n       # NOTE: API_KEY and MYCHANNEL name must be updated with values\n       #       created in pushetta web site in the previous steps\n       sendNotification(\"API_KEY\", \"MYCHANNEL\", \"ALARM!!! Something move\")\n    else:\n       print \"No motion\" \n    time.sleep(0.5)\n</code></pre>\n<p>Isn‚Äôt a ‚Äúproduction ready‚Äù software but a good starting point to make the real one. A small problem with this code is it send a push notification for every motion it detects. This can generate many notifications and Pushetta protects for this problem blocking requests if these are too frequent. This can be simply addressed recording last notification sent and send another one only some time has passed, I leave this as an exercise for the reader.</p>","id":"e594e979-7f3a-5368-af49-af03dd3e96fa","frontmatter":{"title":"VoCore as smart sensor","date":"January 18, 2015","tags":["linux","python"]},"fields":{"slug":"/vobore-as-smart-sensor/"}}},{"node":{"excerpt":"Push notification from Arduino Y√∫n I have often wished a system to send notifications to cell phones without paying for it (ie SMS) or using emails. Major mobile operating systems include those that‚Ä¶","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 180px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/49c009956801c0d56397b1921a6c611a/e9ff0/push-yun-image1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsSAAALEgHS3X78AAADDElEQVQ4y4WU20sUcRTHz8zs1r8QIUUvQQ+FIb6EiASBRPWgUZtdHyp6yggpIrqa7ure3C26GKGBpVhb2erO7my7q+tam2tWBFYUBWEUdHMtnZ3rr/ObyVtbOJyHOTPnM+ec7znzA0LkfFP0nEbkbG782+SYRl1R1/8RBnmPJE2XCF6qWtrbUsB7v0/8pJ4u60SaB9aJQjQtOjpSle60RpwQblifarv1blhWJPqFuTzMJWWiqzXDIQieZfg6RnBC1MWG6yF4ZvPDDlkWCVFm8zOwalTb+/E1BGu5B25L1A0IC068WRDzIN/8+pFRf+4fsEKfktMvHkCobpo0jYu6gK/fmu6cB655zkN3LY2eDQsu/OLGR+0GLP0X3vukC3pqLUk/9PuwYYg0Ql8T1++HsL00dZ1oipYvmG6qpcnlqTbodVmP7uIq11E46WMPV1m3lEPMuTx+aUIcp7mnkk/B1Fd/iNnFAiZxWA5t4/ZXMDdP0JqrbZZ9FdBxkhOcL7+NYnXaX7AhA+E/jEConk5o6BI8PA84Zyw72QTDV1B/6Dnne5UidFy5ObDh61vSnSgMxrHVNgg5IOWHPi/t+eBWLmgHwVGcuKrKdHP1adhMm/n0ju2x01Qpv2XTWsuaIqb1GHPjhGVDmaWkGOIeFiXoPtf+dojQPkUKGxujiZJY0nsNInZWMIaU8HL7K62rV1kLV3K2chAaIeZmsAuhYZngH81+NTs3Mivi7scB4O0Lox4cKRdxsRiHPSc8EHfDwHlUgYvQaS/A5Qnby5KtY5Nj2DvCpO3NINw9zkYcuEamMUIDwztYc0nCjQxmnnrFYdi94yefhhAEY0JjR57xtsFbOzOB7ZnAnsydFfHLBcmLXLiBFiw4F0V9OwcDOzIBDKjK3D4w1PU++xkLN9VWUGp00BQd74lvpH9J34XCdMvCmBe6T1U/uW8spmrGGMHqH7WxdUkTZT2HJumiSqRfuZ8VA+1LExc43lEUb/44/gUT5GZicuaG558k5omh4t8/8PntwKc3E9IklTbvGEH7DYVscjGM1ZTWAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Pushetta\"\n        title=\"Pushetta\"\n        src=\"/static/49c009956801c0d56397b1921a6c611a/e9ff0/push-yun-image1.png\"\n        srcset=\"/static/49c009956801c0d56397b1921a6c611a/e9ff0/push-yun-image1.png 180w\"\n        sizes=\"(max-width: 180px) 100vw, 180px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h1>Push notification from Arduino Y√∫n</h1>\n<p>I have often wished a system to send notifications to cell phones without paying for it (ie SMS) or using emails.</p>\n<p>Major mobile operating systems include those that are commonly referred to as push notifications and slowly these are getting available also on Desktop system. The use of push notifications is not trivial because every system (or at least the major ones) requires to develop a custom App as receiver of notifications.</p>\n<p>Simply put, notifications aren‚Äôt like SMS, where knowing the phone number is enough to send a message, no!! You need to develop an App and use a server provided by manufacturers of mobile operating system (ie Apple, Google, Microsoft, ‚Ä¶) but this isn‚Äôt enough there are also some security requirements like digital certificates and other pagan rituals.</p>\n<p>Back to the top what I needed was a simple notification system and looking around I was not able to find one, so I made Pushetta. The opportunity came from the integration of my pellet stove in Domitio, my home automation system. One of objectives was to get notified when pellet level was below a threshold, this information is important because some stoves fails to start,  when refilled, if pellet has been previously completely exhausted (mine is one of these).</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6ecd877d4c393784702658ba1dc63a1a/4b190/push-yun-image2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 133.3984375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAbABQDASIAAhEBAxEB/8QAGgAAAQUBAAAAAAAAAAAAAAAAAAIDBAUGAf/EABYBAQEBAAAAAAAAAAAAAAAAAAECAP/aAAwDAQACEAMQAAABiJjg604SZRxTttoUob//xAAfEAACAgIBBQAAAAAAAAAAAAACAwESAAQREyIjMTL/2gAIAQEAAQUCPYICDZZbjGe0x5Y5nGRRlh6qm9ojBCsBsX1//8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFhEBAQEAAAAAAAAAAAAAAAAAEQAQ/9oACAECAQE/ATW//8QAHRAAAgICAwEAAAAAAAAAAAAAAREAAhAxEjJxgf/aAAgBAQAGPwJBKAZr7ji2pU1B+zsoSdzWP//EABwQAQEAAgIDAAAAAAAAAAAAAAEAETEhgUFRcf/aAAgBAQABPyFIUag5fMG5lsnzSDIWYQy8pCAgTu2tx25y3da9xwgv/9oADAMBAAIAAwAAABBzPjz/xAAYEQEAAwEAAAAAAAAAAAAAAAABABAhEf/aAAgBAwEBPxAdoUycn//EABcRAQEBAQAAAAAAAAAAAAAAABEAARD/2gAIAQIBAT8QzAxHH//EAB0QAQADAAIDAQAAAAAAAAAAAAEAESExQVFhccH/2gAIAQEAAT8QQe5Cmxgb1li0gDiEJ7KnMyv2lkaXEzlA5fZK5GqIWz5LFZ32Y48ywrXUt7KP2doGQCf/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Stove\"\n        title=\"Stove\"\n        src=\"/static/6ecd877d4c393784702658ba1dc63a1a/4b190/push-yun-image2.jpg\"\n        srcset=\"/static/6ecd877d4c393784702658ba1dc63a1a/36dd4/push-yun-image2.jpg 512w,\n/static/6ecd877d4c393784702658ba1dc63a1a/4b190/push-yun-image2.jpg 800w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>So, Pushetta is a simple system I made to send notifications to mobile phones (and also desktop in future), components are:</p>\n<ul>\n<li>A web site, <a href=\"http://www.pushetta.com\">http://www.pushetta.com</a></li>\n<li>An API</li>\n<li>Some clients libraries (eg. for <a href=\"https://github.com/guglielmino/arduino-pushetta-lib\">Arduino Y√∫n</a>)</li>\n<li>Some Apps (for iOS, Android and Windows Phone)</li>\n</ul>\n<p>Typical use case is:</p>\n<ul>\n<li>User interested in send notification register on pushetta.com</li>\n<li>He /She defines a Channel, that is a node where send notification</li>\n<li>User wants to be notified downloads the <a href=\"http://www.pushetta.com/pushetta-downloads/\">App</a></li>\n<li>By the App he seeks interested channels and subscribes them</li>\n<li>Every time a message is ‚Äúpushed‚Äù to a channel subscribers receive it</li>\n</ul>\n<p>Back to my stove I made a custom shield for my Arduino Y√∫n to interact with it, this interfaces Arduino with a ultrasonic sensor that measure pellet level and some relays to controls start and stop of the stove.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 550px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e611382aced5546cc244e66b8214addc/d7854/push-yun-image3.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 133.203125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAbABQDASIAAhEBAxEB/8QAGQAAAwADAAAAAAAAAAAAAAAAAAMEAQIF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAIB/9oADAMBAAIQAxAAAAHlvTVKshJ2cF6yaFP/xAAeEAACAQMFAAAAAAAAAAAAAAAAAQIDEBESEyExQf/aAAgBAQABBQJlHOtzsprbySEyT5l0e//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABURAQEAAAAAAAAAAAAAAAAAACBB/9oACAECAQE/AYP/xAAZEAACAwEAAAAAAAAAAAAAAAABEAACEXH/2gAIAQEABj8CBmqsAFcQ4w//xAAdEAEAAgICAwAAAAAAAAAAAAABABEhMRBxQVGh/9oACAEBAAE/Ibr4bqe2AmTcXAe5TCr3Uz4CIZXuOYT4IR2n/9oADAMBAAIAAwAAABBI0Yz/xAAYEQACAwAAAAAAAAAAAAAAAAABEQAQMf/aAAgBAwEBPxAlHLU//8QAGBEAAgMAAAAAAAAAAAAAAAAAAAEQEVH/2gAIAQIBAT8QwVCSP//EACAQAQACAAUFAAAAAAAAAAAAAAEAESExQVFhcYGR0fD/2gAIAQEAAT8QvmqeeriACFjRh3lNDRKiFAWcq+oNFrJotTUWZ0llDpnBJAZbN4IFgE+TmKqhu3ef/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Stove controller\"\n        title=\"Stove controller\"\n        src=\"/static/e611382aced5546cc244e66b8214addc/d7854/push-yun-image3.jpg\"\n        srcset=\"/static/e611382aced5546cc244e66b8214addc/36dd4/push-yun-image3.jpg 512w,\n/static/e611382aced5546cc244e66b8214addc/d7854/push-yun-image3.jpg 550w\"\n        sizes=\"(max-width: 550px) 100vw, 550px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8fb8528792328c193d8ebbd3cf8bb191/4b190/push-yun-image4.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 133.3984375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAbABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAIDBAX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB4bs45cKRL661TQH/xAAbEAACAgMBAAAAAAAAAAAAAAAAEQMSARAgIf/aAAgBAQABBQLNtq8k/oi6Hz//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAaEAACAgMAAAAAAAAAAAAAAAABEQAhAhAw/9oACAEBAAY/ArcGsiFUtPh//8QAHBABAAICAwEAAAAAAAAAAAAAAQAREDEhQWFx/9oACAEBAAE/IUmmvsQ033KlfJlxVpIN2HLPUGOHcWty8dY//9oADAMBAAIAAwAAABAAIAz/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/EB//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EB//xAAeEAEAAgEFAQEAAAAAAAAAAAABABExIUFRcaFhkf/aAAgBAQABPxC9GNmr7AFhT8M6XG2hYOmgYS+vYq0DMt5fksbrjco3RFeXdYrzBgxP/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Ultrasonic sensor\"\n        title=\"Ultrasonic sensor\"\n        src=\"/static/8fb8528792328c193d8ebbd3cf8bb191/4b190/push-yun-image4.jpg\"\n        srcset=\"/static/8fb8528792328c193d8ebbd3cf8bb191/36dd4/push-yun-image4.jpg 512w,\n/static/8fb8528792328c193d8ebbd3cf8bb191/4b190/push-yun-image4.jpg 800w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>So, stove controller continuously measures pellet level and when under a threshold uses Pushetta to send a notification. Sending notification from Arduino it‚Äôs really simple, nothing can explain it better than show a trivial example.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5b3fdf750264689e1d42227d2fddce49/5a190/push-yun-image5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 98.4375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC7ElEQVQ4y6VUWU8TYRSdmEAxJv4EY0x40r9nNHF54MkXTUBDAi3IEhWBgiCbaHwD1B9gTKxdZqazb52tM9NOj3emi9MSlMQmJ+d+M/c7vffc2zKra68xv7uMuaM9LB9/wtLxRywefcDz4haevnmL6Y1iyjObRTxbW8f0+ibFW8jvHaBwcIjC/iHyhIWDo/QuM7mwisn8Cm7MzOH24iruvHyFq1NPwNx9AOb+YzD3HnW5j+Q8Csq98nAKN2fzYF58/4H90i9sl8rYI14tVXB9ex/jG+8wsbmTItfDxAVI3l0r7uLWzgEYt9mEJUlQBBEUwFeq+MzVcWaYONMNnBL6fKLpQzjVjB70NOdEVsBEYQjdakDVTfiOibChAU0PQKcHZPgfn04MJggCeJYGUxUhSjLqogReVlGuS6gIMmqijJ81HlVRhUhfyis6OMWAajbQimO0Ox20iWPSC6i4VDCgyiLXhGVZME0Thu1Cd5owvAC2H8J0A2h0tuhsuk2oto+G10Qcx93COt0OoigC43sePF2AIQtgqxWUSiWoioK41bpclyQ2JOh5Llq+DccyYOgaPM9Hu90eOJfkDqMzhHMVJgJJu77GQxY4GDRd1/WgGFbKiSUheeP7fnohK5CtciCYXAppqqGjwzJ06JoG23GhmHYqlviUxSUEXbQDF3HTQeATX7AhWbHRds8Jek4DAlsBz3GwTT0dkkcWCHUeLMtBU1VqmaaaqWzUz4Gg4zhohc30kiCKKbuuAykRIe56GPT2Nh4gu+znW6YV4VgWlXIZulBFQ2bB8zxqsgFJb8CwbLAUC5oJVtLomQXJsGHTLvY3YkgwDKP0EMf0Mqb9a4VEEcJ2jBahTcZGadzl/jmMWqm3wxUm65DZu7iH7K94NM7OrZPJDxPB1N3Ek/9FopMIfqsL+Jqi3gPFHE/geuDxhSZ9VmNHno+C8iiHGVtYwdhsAeOFZYznlzA2v4Qc/bnmtveQ23r/h/vx30A5vwEmeJ6UObIanwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Sample sketch\"\n        title=\"Sample sketch\"\n        src=\"/static/5b3fdf750264689e1d42227d2fddce49/5a190/push-yun-image5.png\"\n        srcset=\"/static/5b3fdf750264689e1d42227d2fddce49/01e7c/push-yun-image5.png 512w,\n/static/5b3fdf750264689e1d42227d2fddce49/5a190/push-yun-image5.png 800w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Example shown in picture is a modified version of the ‚ÄúButton‚Äù example found in Arduino IDE, in this version (made for Arduino Y√∫n) when button connected to pin 2 is pressed a push notification is sent. In my stove automation system I use the same code to send notification when pellet level goes too low.</p>\n<p>Pushetta isn‚Äôt limited to Arduino, it can be used virtually from any system can make an http post with a json payload. I used it also in an experiment with Raspberry Pi where I made a simple face recognition software who sends a push notification if I‚Äôm the subject in the camera.</p>\n<p>I‚Äôm looking for beta tester because Pushetta is a ‚Äúspare time‚Äù project but I would like to transform it in a production level software, look at www.pushetta.com if You can help me.</p>","id":"89704365-55b5-5cb6-8d3f-e3a24d78d47c","frontmatter":{"title":"Push notification from Arduino Y√∫n","date":"November 16, 2014","tags":["apple","android"]},"fields":{"slug":"/push-notification-from-arduino-yun/"}}},{"node":{"excerpt":"Making a simple Robot Making a robot is a big challenge, also when You say to yourself ‚ÄúI make only a simple robot‚Äù simple will be not so simple. I started making the ‚Äúsimple robot‚Äù mainly because I‚Ä¶","html":"<h1>Making a simple Robot</h1>\n<p>Making a robot is a big challenge, also when You say to yourself ‚ÄúI make only a simple robot‚Äù simple will be not so simple.</p>\n<iframe width=\"625\" height=\"469\" src=\"https://www.youtube.com/embed/c-B3EiIwta8\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n<p>I started making the ‚Äúsimple robot‚Äù mainly because I like to make things, and I like more to make things that move. For the first version I decided to concentrate my efforts in electronic and software, for this I bought a cheap robot platform for mechanical platform (this one).</p>\n<p>I gave to myself some goals:</p>\n<ul>\n<li>Make a WiFi connected robot</li>\n<li>Make use of websockets for the control interface</li>\n<li>Make the robot speech</li>\n<li>Use some simple form of shape recognition</li>\n</ul>\n<p>I made many projects based on Arduino but this time I looked for something more powerful, looking in my ‚Äústuff drawer‚Äù I found a beaglebone (white one) and I choose her for the brain of the robot.</p>\n<p>BeagleBone is an incredible platform, it can run various OS like Arch Linux (default), Ubuntu and many others. One thing that made BeagleBone a little ‚Äúspecial‚Äù compared to others it‚Äôs expansions capabilities (65 GPIO, 8 PWM, 7 Analog input, ‚Ä¶) and a feature I found only in this board : PRU.</p>\n<p>PRU is acronym for Programmable Realtime Unit, BeagleBone has two of them. Essentially PRU are autonomous chip with a specific assembly instruction set capable of performing realtime task, they run separately from main OS but can communicate with it using shared memory.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 686px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ec19f6738ab9488c9ebb84099343f91a/f6386/robot-image1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.3828125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB0ElEQVQoz2VSi5KiMBD0/z9MLJArUYQFFgggQQIoyyM8VO46sLtq3VhSeUx3z/Rk9fe/mKYppjRJEs/zgiBwPZ9S+nt7u93qur7f71ivXmGPnwAe/1c6ZAOGdZFniiz3w/gGXiibOTjnXddlWXa9Xvu+5y9RZEyRlScYxLxttd2OkODDND8sq+Uc5+M45nm+CC4xjOMMlsH9BHeco8MwCAgRHZ6TJE1TsTifaUyxRhXDMGR5HgZkI21QogBPc29dx23Lti1rr2mO83k86o5tG4bJGAOpLMtRGCGtaVqQbRXlqVyWZQqFJEGH2FZVpaoqDpcrz3U3koRbUfYwZiyFwHib3UY9dVWjPMwG3ziOoQa/YC9sP51OjuNI6zUWyO6HIWdM3W75bMoK9ZTl1xLAh2EIk8SoHg/g4YHj2PrhAOJJKA+XIjcNE869GWZZaNrWdd31PJ+In/MpoiiKtm3Be9jvoyjKMvZHVbEFarWMBGUQQnAHZZis7TR80xQdMLSNKhJKpbUEC9Gfosh4gd/KCY3B6hOymIT6j7oO88CNEyjjncAOUPu+D29Mw4Ap3+CmrrHHPC+XC6xGNvLEhCmFsnjergsju65fCkFUX1XbNP8AHTfTL0dIXvoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PRU-ICSS\"\n        title=\"PRU-ICSS\"\n        src=\"/static/ec19f6738ab9488c9ebb84099343f91a/f6386/robot-image1.png\"\n        srcset=\"/static/ec19f6738ab9488c9ebb84099343f91a/01e7c/robot-image1.png 512w,\n/static/ec19f6738ab9488c9ebb84099343f91a/f6386/robot-image1.png 686w\"\n        sizes=\"(max-width: 686px) 100vw, 686px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>PRU are essential to make tasks with high precision time constraints, like make a pulse wave modulation or, as in my case, to read short pulse from a <a href=\"http://learn.parallax.com/kickstart/28015\">PING)))</a> sensor.</p>\n<p>PING))) sensor from parallax is cheap and theoretically really simple to use, this is true for example with Arduino but using it with BeagleBone make things a bit more difficult. This sensor works emitting an ultrasonic signal when the board send a short signal on trigger pin (40Khz), to misure distance board have to read the echo response duration. Here is where things get complicated.</p>\n<p>Using a GPIO to read an hight frequency signal and pretend to precisely measure it is really optimistic. Isn‚Äôt a hardware problem but more a software one. GPIO on BeagleBone are handled by operating system (Linux), this is not a realtime OS so software scheduler can‚Äôt grant a precise response time to an hardware event.</p>\n<p>In a next post I‚Äôll show how to use PRU in BeagleBone, stay tuned!</p>","id":"e9c964c7-49ee-5443-99e2-26abf7bfb5c1","frontmatter":{"title":"Making a simple robot","date":"November 02, 2013","tags":["python"]},"fields":{"slug":"/making-a-simple-robot/"}}},{"node":{"excerpt":"A Raspberry PI based Arcade Word ‚Äúvideogame‚Äù is for me a big piece of my youth. I spent many hours playing with arcade games when I was young and many of them are still impressed in my mind. For other‚Ä¶","html":"<h1>A Raspberry PI based Arcade</h1>\n<p>Word ‚Äúvideogame‚Äù is for me a big piece of my youth. I spent many hours playing with arcade games when I was young and many of them are still impressed in my mind.</p>\n<p>For other like my grew up in the 80s a screen like this:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 256px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/86c58597f3714b74b948730c6adad572/6f3f2/arcade-image1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 93.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAAsSAAALEgHS3X78AAAC40lEQVQ4y2NgoARI8kurimqoimr6m0Wkuhf5m0WqimhoSOhoSehLCcgK8YpoSupqiOsARcCkrpqopomiVbhNkryIMsOL9n/zYtdWuDU3+fa3+k9q9u2v9eys8eho85vsbxxhpm7b7Duh1quzzrOrzqsLRIIY3e2BU+81fmZ41/vfXdMP6ARmJmZiXMoIhAwMnKxc1+vfMrzv/u+pEwjkszKzMTEygxATM1AFJw+vrJqWiISAqpkstyAHIwMTRJaZkQWomJuN90YtUHPvf2/tICAfqIeJkYmFiQWIWIE0K5uGpr6eiqKikSS/BA8zAzNQnBlsLlAxLzvfjQawzW5avmQ4+0bdW4bXXf+7A2dqSeoDhYxkzeMsMiJNEiNNk6JMkoBkhElilBmIHWGaGGuWBvGgGK9komXW3ebPDG86/7cHTFEX1waK6kkbRxgnBhlGBxvEBBvFhBjEhBjFgNiGQDI6zDjBVcMHqEyURzzaNAUU2m97/ruoe5PsbDZwaANtrvXuUhBSAgppiGt76wa5afq6a/mhI01fb51AWxVHoDJBTmF//bC7jZ8YXnX9nxq+GOhboKiFkl2OfVmKdX6adUGaTQGIhDFSrfPTbYp99aPBiVIm16HiXvMXhndd/100CTibEeRSBiEZRgt7Rgbk0H7b/T/LroSfUwBkJJ+0voyJjqSBrrShrqQhiJSCkpriBra6Fj62pkBlXKzcpvJWtxo/MLzq/L84YYudiitQ1Fndq8Grt9ytudKttcK9FUhWwkiwYGesaQ5QmbywUoNXz4PmbyCbgSEEcjYzMBUx4HE5xPHw0L5a+4rha///YKMoIN9GSXJ+pD47Cw8vBy8POwLxcfIxMXA4u6knlroDGUBZDhYOUR6xRy3vGOp8ukvdGzsDZk4Jnbo+YXqb39QOf3TU5jt1YvzkOZmzgQwgt91/amfAtGVJ20AuAeYHVmYWZkZmBkjGYGbBJIH5CehgZBGgRgD6QeY3UkiabwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Bubble Bobblee\"\n        title=\"Bubble Bobblee\"\n        src=\"/static/86c58597f3714b74b948730c6adad572/6f3f2/arcade-image1.png\"\n        srcset=\"/static/86c58597f3714b74b948730c6adad572/6f3f2/arcade-image1.png 256w\"\n        sizes=\"(max-width: 256px) 100vw, 256px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>are immediately are commented out with something like ‚ÄúAHHH!!! Bubble Bobble what a great game!!‚Äù. Yes it was and in a nostalgic day I decided to bring these day to a new life.</p>\n<p>Today it‚Äôs really simple to play with these old games, You can install MAME in one of it‚Äôs flavours and look around for game‚Äôs ROM (note: isn‚Äôt legal to own ROMS file of games You don‚Äôt own). But I was looking for something more, I was looking for reproduce THE FULL EXPERIENCE.</p>\n<p>What I wanted was to reproduce the experience of arcade game and for this was mandatory to make one. So I made a custom arcade game cabinet, indeed I made a miniature version of it.</p>\n<p>In the Internet there are many projects about making a custom arcade machine but I tried to make one from scratch. As hardware platform I used a RaspberryPI with a custom Linux distribution specifically made for this kind of games : PiMAME. I made the cabinet laser cutting some MDF wood, I don‚Äôt own a laser cut machine so I made the CAD drawing and I used vectorealism, a really good online service for laser cut and also 3D print.</p>\n<p>First prototype isn‚Äôt really cool but making it gave me a lot of satisfaction and experience, this is only a starting point because I‚Äôm planning to make a second version with two player support and more attention to aesthetics.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 426px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f4488f7188653eae7232cabfaf494ea9/823c4/arcade-image2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 112.67605633802818%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAXABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAEDBQIE/8QAFgEBAQEAAAAAAAAAAAAAAAAAAQAC/9oADAMBAAIQAxAAAAG+MznN7GaKys2SB//EABkQAAMBAQEAAAAAAAAAAAAAAAECAxIAMf/aAAgBAQABBQI2UOboAaq3WObvXSr406E4oOyR3//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EAB4QAAIBAwUAAAAAAAAAAAAAAAABEQIQQRIhMZLB/9oACAEBAAY/AtPhnqZGxpUWmDg2P//EABsQAQACAwEBAAAAAAAAAAAAAAEAESExQWFR/9oACAEBAAE/Id+FczmoW9EpkFW1xOyBy4LCL2PGWhZd5nBT0YXjI+z/2gAMAwEAAgADAAAAEGv/AP7/xAAVEQEBAAAAAAAAAAAAAAAAAAARIP/aAAgBAwEBPxAj/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAQ/9oACAECAQE/EAAJN//EAB0QAQEAAgIDAQAAAAAAAAAAAAERACExoUFRYYH/2gAIAQEAAT8Q0QoBQ3nu4q0+2h3giEJBTV4H6ZFo0oFswVJbqz7jc2Pg7CnfeShWeDTvFxBulq/lz//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Tabletop prototype\"\n        title=\"Tabletop prototype\"\n        src=\"/static/f4488f7188653eae7232cabfaf494ea9/823c4/arcade-image2.jpg\"\n        srcset=\"/static/f4488f7188653eae7232cabfaf494ea9/823c4/arcade-image2.jpg 426w\"\n        sizes=\"(max-width: 426px) 100vw, 426px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>This is not the end, this is only a starting point. With experience I gave making the first prototype now I planning to make a second device with more ambitious targets:</p>\n<ul>\n<li>Two player</li>\n<li>More powerful board (I‚Äôm evaluating many like BeagleBone Black, Phoenix A20,‚Ä¶)</li>\n<li>More attention to cabinet esthetic</li>\n<li>Simple to build, I‚Äôm thinking about a system where cabinet can be assembled like an Ikea one</li>\n</ul>\n<p>I‚Äôll post in my blog progress of this second phase.</p>","id":"a92457ce-10dd-5a6d-b206-a04c5b1954d1","frontmatter":{"title":"A Raspberry PI based Arcade","date":"November 02, 2013","tags":["raspberrypi","python"]},"fields":{"slug":"/a-raspberry-pi-based-arcade/"}}},{"node":{"excerpt":"Domitio Domitio is a classic always open project with a no real end. Its purpose is to automate some house tasks like: Handling sprinkler timers Handling house temperature Managing electrical power‚Ä¶","html":"<h1>Domitio</h1>\n<p>Domitio is a classic always open project with a no real end. Its purpose is to automate some house tasks like:</p>\n<ul>\n<li>Handling sprinkler timers</li>\n<li>Handling house temperature</li>\n<li>Managing electrical power</li>\n<li>‚Ä¶</li>\n</ul>\n<p>Some tasks already works some other partially and others are still in development. Domitio is deliberately an heterogeneous system, I used (and presumably I‚Äôll use) many different devices and technologies for many reasons. First because advancing slowly technology evolve and solutions used in past are overcome by new (and often cheap) ones.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 717px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c68b6c2a0d2cd076307806b4f3ec1298/b0abb/domitio-image1.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 133.984375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAbABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEBQH/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABsTnNloGEZnV0DSMP/8QAHhAAAgEEAwEAAAAAAAAAAAAAAQIAAxITIQQRIjH/2gAIAQEAAQUCNdVOe4HjXzcVWinWayGqWRD5b4AIXbv/xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAwEBPwEh/8QAFhEBAQEAAAAAAAAAAAAAAAAAABEh/9oACAECAQE/Abqqj//EABwQAAICAgMAAAAAAAAAAAAAAAAREjEBECAhUv/aAAgBAQAGPwJWUiU0zOdqDPPfCz//xAAbEAEAAwEBAQEAAAAAAAAAAAABABEhMVFBof/aAAgBAQABPyGsC0qxv4y1j4VGyJ250qbsx23BUBHuxJmei4yV+zGJW5yGofif/9oADAMBAAIAAwAAABCjOY7/xAAXEQEBAQEAAAAAAAAAAAAAAAABABFh/9oACAEDAQE/EEM7GzNv/8QAGBEAAwEBAAAAAAAAAAAAAAAAAAExESH/2gAIAQIBAT8QT1B9kGmf/8QAIBABAQACAQMFAAAAAAAAAAAAAREAIUExcaFRYYGR4f/aAAgBAQABPxCqUKlkxEkKO1U5kHzhbuFbs460xNNnb5/MERGI4s584kKAiyYlGVp2+tZqdAHVE98UJWn0zeUnZzbbo1dzH8J2Z//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Domitio board\"\n        title=\"Domitio board\"\n        src=\"/static/c68b6c2a0d2cd076307806b4f3ec1298/b0abb/domitio-image1.jpg\"\n        srcset=\"/static/c68b6c2a0d2cd076307806b4f3ec1298/36dd4/domitio-image1.jpg 512w,\n/static/c68b6c2a0d2cd076307806b4f3ec1298/b0abb/domitio-image1.jpg 717w\"\n        sizes=\"(max-width: 717px) 100vw, 717px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>An example of this is the sprinkler controller, this was made (about three years ago) using a <a href=\"http://www.acmesystems.it/FOXG20\">Fox Board G20</a>, today most likely I would choose a different hardware and maybe a different approach. Evolving speed of technology is a common problem in industry, in my case without market requirements I can choose what I like when I like it, but in a industrial approach this isn‚Äôt the right way.</p>\n<p>Working with different technologies which contribute to the same goal it‚Äôs a good challenge because I need to face many problems. First I need a ‚Äúglue‚Äù to make different parts communicate each other, this glue is made by protocols and software.</p>\n<p>For the software I chosen  Python as main language, but I used also C/C++ for some parts. Talking of protocols I started looking for one specifically made for domotics, I found many but  I got the impression that often are vendor specific, closed or based on obsoletes ideas. Out of curiosity some of these are X-10, UPB, Z-Wave, Insteon‚Ä¶ Abandoned these protocols I decided to use the today ubiquitous TCP/IP as transport and web protocols as Application layer.</p>\n<p>At this time Domitio is made of these components:</p>\n<ul>\n<li>Sprinkler control (fox board G20)</li>\n<li>Gas boiler controlled by Arduino with bluetooth shield</li>\n<li>Pellet stove controlled by Arduino Y√∫n</li>\n</ul>","id":"1934296c-5bbe-5496-a12a-be4ab8f2ae72","frontmatter":{"title":"Domitio","date":"March 23, 2013","tags":["linux"]},"fields":{"slug":"/domitio/"}}}]}},"pageContext":{}}}
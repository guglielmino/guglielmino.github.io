{"componentChunkName":"component---src-templates-tag-js","path":"/tags/swift/","result":{"data":{"site":{"siteMetadata":{"title":"Gumino.com","author":"Fabrizio Guglielmino","labels":[{"tag":"raspberrypi","tech":"Raspberry Pi","name":"DiRasberryPi","size":20,"color":"orange"},{"tag":"React","tech":"React","name":"DiReact","size":20,"color":"deepskyblue"},{"tag":"nodejs","tech":"Node.js","name":"DiNodejsSmall","size":20,"color":"lightgreen"},{"tag":"git","tech":"Git","name":"DiGitMerge","size":20,"color":"white"},{"tag":"javascript","tech":"JavaScript","name":"DiJsBadge","size":20,"color":"yellow"},{"tag":"css","tech":"CSS","name":"DiCss3Full","size":20,"color":"teal"},{"tag":"python","tech":"Python","name":"DiPython","size":20,"color":"deepskyblue"},{"tag":"ruby","tech":"Ruby","name":"DiRuby","size":20,"color":"crimson"},{"tag":"java","tech":"Java","name":"FaJava","size":20,"color":"wheat"},{"tag":"angular","tech":"Angular","name":"DiAngularSimple","size":20,"color":"red"},{"tag":"html","tech":"HTML","name":"FaHtml5","size":20,"color":"darkorange"},{"tag":"php","tech":"php","name":"DiPhp","size":20,"color":"violet"},{"tag":"mongodb","tech":"MongoDB","name":"DiMongodb","size":20,"color":"green"},{"tag":"vscode","tech":"VS Code","name":"DiVisualstudio","size":20,"color":"deepskyblue"},{"tag":"linux","tech":"Linux","name":"DiLinux","size":20,"color":"deepskyblue"},{"tag":"apple","tech":"Apple","name":"DiApple","size":20,"color":"white"},{"tag":"swift","tech":"Swift","name":"DiSwift","size":20,"color":"white"},{"tag":"android","tech":"Android","name":"DiAndroid","size":20,"color":"white"}]}},"allMarkdownRemark":{"totalCount":2,"edges":[{"node":{"excerpt":"Writing Apps for Apple TV for fun and (no) profit A new AppleTV On 9th September 2015 Apple announced a new version of Apple TV, the fourth-generation, and it brings a long awaited feature: Apps. Many…","html":"<h1>Writing Apps for Apple TV for fun and (no) profit</h1>\n<h2>A new AppleTV</h2>\n<p>On 9th September 2015 Apple announced a new version of Apple TV, the fourth-generation, and it brings a long awaited feature: Apps.</p>\n<p>Many times I asked myself why Apple didn’t enabled Apps on Apple TV. Advantages are obvious to me: iOS is one of the most widespread mobile OS and the one with highest number of Apps. Porting Apps to Apple TV can be really simple and this make it the platform for TV with the higher number of Apps.</p>\n<p>Eventually Apple did it and better than I could imagine. Apps for Apple TV can be made with classical approach, like we develop native Apps for other iOS devices, or in a new way based on a specific markup language and JavaScript. The latter is really interesting and at the same time strange for Apple standard, what I’d like to do in this article is make a simple example to explore this new way.</p>\n<h2>TVML, TVJS and TVMLKit</h2>\n<p>Apps made with this new way use three new technologies, precisely TVML, a markup language made to create the UI (TVML stands for TV Markup Language). TVJS, a  JavaScript API to display and interact with TVML, and TVMLKit, the native layer to combine all together.  I’m a big fan of learning by examples approach so let’s start with a sample.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1072px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/12fa73910060c28125ee12a8faaa2918/d5bfb/appletv-image1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.890625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAADgUlEQVQ4y63O60+aZxgGcLMl+1uWxXUeBioTRKwHVA7DUyujVt9WMDLUtFMUhKHWKqAVxkFdWetWeeuJNhZpu2q3zqXQ1DpsjYvJviidW7a5D2u/dH14rr1C/4TdyZX7fp4Pv1wZ62uhuh/XH7Q+jMZaYtEoE43FmGj0IXMrvMKEw2EmshJhVt7ctyMrzNrqKrOx8Zh5wiW++YTZim+2bD+N6+KbG8KMo6mUKf+qP6lBw8lTONXUDLWmmdstYJgzqfdRGOYstFotOg16mI3n4Ri2IuCxY+kbL24vBrC1vozw9clQCszMLtjL4QvB5d/cPCEpLCohZeWVRKFQkrpaFSk+Xk4qKquJUqkknzQ2EL22hdh6DcQzYiJfuWxkPuB4tbo0heDkxbkUeIwnTOQKipGTL07mFoipUFJOxaVVVFRSSWXKGlotV9EqLqebNLTrUy21GDuoc9BIXSP9NDg1SucCjtd35v244h6YT4Hv5QgSx/hFeJ8vTGblFSErTwy+qBSFEilEJVKUSeVQfFwLtVqN9razsPZ2wtxtQH9PJzgQc5ftJPT1JXjtpjT4brYgkcnjQJ4omZUvRq5AggJxObiWOF4hA9cQtXX1aD6tAdcQlp4OXLCcw6itB1c9Q5jxXiDBaTvGBrvTYGYWP/EBrxDZeaIkTyBG3kfFEEkqUCrlMIUKcq5dfcMJMM1N6GzXou9cO4ZMXXBwoOuiiWtmJl67BdZufRosE36YqJGKUCHOT1ZJCnCmQYrWRjk+0zXC3quFy9YB/8h5BMaMmPVZEboygsisHZFrDgR9Nsx6LORO0A526vM0aGYqEwNtSjQpipKyYh49UZFPra0y2tYgoVeHGLowpqN2QzUd1pXRS53VdGZATa85W+nuDz76z/5d+uK3+wTYwZ+Jb9Pg2uWuvbBHj2mL5vXihJ4ERtvJT7dGyU5khDya7yfLbh3xG1Vk2lRDAiYV8RhKyDAjIF/2ykk8ZCF/RCdevdyZwc/fua+nwEfL7sPnj4PY5/L71hJe7t3D33v3cbj/AId73+NgN4Lnz0JIxBfw6/ZNHGzfwMHTRezGZvHL5jz2ny3hReIuYvd8yynQ4zBN+Mb6F7xOc9DjNLGu0R7W7exjPW4b6/cNsxPjZnZizMS6j7ajl/Vx/14u095BdtLL3V9Yg5N+243x8T59xpt5m8s7/0PeApDxHy+kI+rQQol6AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"A simple tvOS App\"\n        title=\"A simple tvOS App\"\n        src=\"/static/12fa73910060c28125ee12a8faaa2918/d5bfb/appletv-image1.png\"\n        srcset=\"/static/12fa73910060c28125ee12a8faaa2918/01e7c/appletv-image1.png 512w,\n/static/12fa73910060c28125ee12a8faaa2918/2bef9/appletv-image1.png 1024w,\n/static/12fa73910060c28125ee12a8faaa2918/d5bfb/appletv-image1.png 1072w\"\n        sizes=\"(max-width: 1072px) 100vw, 1072px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Before starting make the example a few words on TVMLKit App’s architecture, this kind of Application is made of two parts: one native and one JavaScript.</p>\n<p><img src=\"./appletv-image2.png\" alt=\"Architecture\"></p>\n<p>In a nutshell native code is something like a container which load startup JavaScript and give control to it. JavaScript and resources can be loaded from a remote server (ie a web server) so our App can be remotely updated after released on the App Store without making a new submission (this is one reason because I wrote this model is strange for Apple). So we’ll start making the native part, I assume You have XCode 7.1 or higher.</p>\n<p>Launch XCode a choose tvOS Single View Application.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1112px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1827a5e484bd6e74242896fc8dfb2982/3fca6/appletv-image3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 80.859375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAACDUlEQVQ4y5VTy67aQAzlO6q2/3Olu6jU7tNuovuTrNgjEIiSUKmtaIAAeb9I5uEeDwxKdEvVWhxNcDzHPrYz8n3v7WG/fzkcDm4Yhm4SJ+75fL4hMr4/4XgM3WAfurvd3t3h3AaHl5X37f3oq7d5VppIKUWXy4WKoqSqqqgGyrKAX5IxrfFjkDnp9nxpOwO2ted/Gvn+5qmqaiYReZ6LNE1llmVSdJ1Mi0YWjZAdnpOskkgq60snQWgADo7lO11ZlrRerz+MNpvNE1cGQg2nxkudJKkWQuq27cwZRZH+/uOnRpw+nk5aKa6NDEDId1Rd1+R53pCwKAq+TOgf1U1zlUZ0k/oabFDFpKpB/IAQGUy2X9stbYEoiklKObhsre9LkoSLeE1oJedZhqCU0Df6F4vjWEPRY0JUaSSzj8GBbduaingT+mDfQ8lMyC9Z5j07ZB/DI3FfS16jojBJrGw2O5SHhDwtWx1XxtL5tL4+mIQJs9uUB2tjhpJm+nQ6UQrZmLgBktyf+z5UZVoTYyhZlivm8H1/SHjro8n+aFUshBCmerRIC6w8y8d2DAktKQLvi/sIircbhnZofFWGMAiCKyH3AmSSAULVXQP+CnCZUwrJJu6E0P3Mf+wq9Kf8vwbJH0fj8fjNfD7/DDiM2WzmLJdLByvgYGrm7IN9KMJZLBbOdDp1VquVxZfJZPLuNzuenvQf+ZZSAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Architecture\"\n        title=\"Architecture\"\n        src=\"/static/1827a5e484bd6e74242896fc8dfb2982/3fca6/appletv-image3.png\"\n        srcset=\"/static/1827a5e484bd6e74242896fc8dfb2982/01e7c/appletv-image3.png 512w,\n/static/1827a5e484bd6e74242896fc8dfb2982/2bef9/appletv-image3.png 1024w,\n/static/1827a5e484bd6e74242896fc8dfb2982/3fca6/appletv-image3.png 1112w\"\n        sizes=\"(max-width: 1112px) 100vw, 1112px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Standard template for tvOS Application includes some files we don’t need, so first operation is to trash <code>ViewController.swift</code> and <code>Main.storyboard</code>, these will be not used in our example. We need to change some settings too, default template is made to use storyboard UI, we removed Main.storyboard and so delete “Main” in Main interface setting (You can also remove this by opening Info.plist file and removing “Main storyboard file base name” key). </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1072px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/86f59895da4e9dac718e0fefc0c8f538/d5bfb/appletv-image4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.28125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAACZElEQVQ4y62RzW7TQBSFDaJrNojwGDxDH4FtglQV1FpBghdgQ6tuYMUbIIVIoVLTqptGUdpVYRFWgUZVSew0KU4dx47t+H9+fLkzKVUlygpGOpqZO+Nvzj1WPr3+sDQ8+VI6G56Wx8bl+mg0UofDoarputr7caaenw/UvqbJ2tS21clkImVZE1UbXqqji5/qYDBY6/f7rzqdzmPlxWr5wfeTk2A6m4LrujBzZ2A7DkRRCFFKwfV8XEfAeQ55nsPNQSjHOoc4juW+2+1uKavP1EL37HTc6XwDTdOIZVnMNE3mOTbzg5ilhLM0TRljnCVxwgihDCEsTVIU7rOMZXhBAD8fH28o68/Lhel0bI7GlzA2DJ4kSY7nORJyLmyhL3S4UBznQRDkWZYJqzdFBPDw8HBDWXv5rnAx+GoaFzqYpsVFe4sW+XVrwoCDMeBjgK4AgdgukxFcxSCBR0dHm0qp9LTgOLaJjsQHEigyIYRIkKhLKELCKEZF4AcReDGXsKuHbwKLCHQkEGHXQAHzfR/XC1ckCIALhQFk8xDmEZXd3uKwdCuQUirdJejM1nWYGwZkeJanCSR+CNb5BHlc/v3fwFar9XegcIg/QOY5m80gQqWo2LZhPrXBD8kfDtvt9qZSLBYf2rZtiMDDMCQoihBKMkIxfKkwCKnnz6kfBBRjoPM4o4ZLaM4ZRSNCiQD2er03ysrKyiPP82L4D0PX9bfK8vLy/e3t7fc7Ozu13d3dj/V6vVqr1aoHBwdVzKTabDarjUbjWvv7+9W9vT05izuihnMF79YrlcoTBccd1F3U0j/qnmD9ApPsU4O3PPHVAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"appletv image4\"\n        title=\"appletv image4\"\n        src=\"/static/86f59895da4e9dac718e0fefc0c8f538/d5bfb/appletv-image4.png\"\n        srcset=\"/static/86f59895da4e9dac718e0fefc0c8f538/01e7c/appletv-image4.png 512w,\n/static/86f59895da4e9dac718e0fefc0c8f538/2bef9/appletv-image4.png 1024w,\n/static/86f59895da4e9dac718e0fefc0c8f538/d5bfb/appletv-image4.png 1072w\"\n        sizes=\"(max-width: 1072px) 100vw, 1072px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Last operation is to permit to the App to make HTTP requests to outside world, with iOS 9 Apple introduced transport security setting and by default it blocks all networks requests. So open Info.plist file and add <strong>App Transport Security</strong> Setting like in the following image (<strong>“Allow Arbitrary Loads”</strong> set to YES is the mandatory part).</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 912px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bb027e80abef0dc18bd18b28a6025c0b/8b69f/appletv-image5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 94.53125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsSAAALEgHS3X78AAACN0lEQVQ4y9WTT3PSQBTA0RHboeHQnq0fxLP3ZhyP8gH8EHVGz8DAR/HozUtxRh3Q2mmBBDSB/CMhYTehQLK7z90QSkXUYXryzfwmycvLb99LNrkcj/b7t08+fHn3/LKjniiKKne6iqyovZSuosjNZktutlpy6+s5v1blNr/fWXPCedbudJ8+On58T/geDHtXDQAKAQoBT3yIkAmB76XgSQDeyAHE8/FiBiRZAInXiJyIYOwZR4eHkhDuf7rUzjR3Dt96TtIZ+NTw57RvIaoYiKoWpqqJqRMBtUOgFmabEH8BoFqh9nD/4CgVXvSdhjL04fNFn5x3h0w1Atbj/HAipo0ifgyZGcTMQgnjp8zG9BaETmKAK32sc9dS6I6cxiQIwLFtAozyARhMoxAW8xlEGMFA08AYDMD3XJhfT9P7ad0S8QCvx7okZR3att1wRx70+9+J7wfAGAOMQ140BYQQeN4YptNrSJIECCFAueMWqTAMQ71YLK6FaILAMAximRZEUcQF05TZbA5xHKcvfkP0ixBjrBcKhaXQNM3GyBmBrg+IYzsQ8u74iqlYIM7/JeST6Ht7e0uh53mN7AEixhWIOjGeGFN0uMpvshLyhdcjj8fjVMgLSHaEzdiWy/I3QkmSfhf+qZOVdAt/F8KO8Z8KV185e4e7xtYOz7IFE7F7diSdiv8E2o3Qdd2PcMfgm99aCfPlcvlFrVZ7U6lUTjmvduS0Wq2+rtfrL/P5/EGuVCrlsrh/R9L4CbROvQD9OWPOAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"appletv image5\"\n        title=\"appletv image5\"\n        src=\"/static/bb027e80abef0dc18bd18b28a6025c0b/8b69f/appletv-image5.png\"\n        srcset=\"/static/bb027e80abef0dc18bd18b28a6025c0b/01e7c/appletv-image5.png 512w,\n/static/bb027e80abef0dc18bd18b28a6025c0b/8b69f/appletv-image5.png 912w\"\n        sizes=\"(max-width: 912px) 100vw, 912px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>Let’s write the code</h2>\n<p>Now it’s time to modify AppDelegate, we have to delete all methods put by XCode, import TVMLKit and make AppDelegate class conform to TVApplicationControllerDelegate.</p>\n<pre><code>import UIKit\nimport TVMLKit\n\n@UIApplicationMain\nclass AppDelegate: UIResponder, UIApplicationDelegate, TVApplicationControllerDelegate {\n    var window: UIWindow?\n}\n</code></pre>\n<p>In this state our App isn’t able to do much so we need to add the code to bootstrap the JavaScript which represents the real core of the App. What we need to do is create a TVApplicationController giving to it necessary info to load the JavaScript code which handle UI.</p>\n<pre><code>import UIKit\nimport TVMLKit\n\n@UIApplicationMain\nclass AppDelegate: UIResponder, UIApplicationDelegate, TVApplicationControllerDelegate {\n\n    var window: UIWindow?\n\n    var appController: TVApplicationController?\n    static let TVBaseURL = \"http://localhost:9001/\"\n    static let TVBootURL = \"\\(AppDelegate.TVBaseURL)/app.js\"\n    \n    func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -> Bool {\n        window = UIWindow(frame: UIScreen.mainScreen().bounds)\n        \n        // Controller context for loading JavaScript\n        let appControllerContext = TVApplicationControllerContext()\n        // Url from which to load javascript\n        appControllerContext.javaScriptApplicationURL = NSURL(string: AppDelegate.TVBootURL)!\n        // BASEURL variable will be available in the JavaScript code\n        appControllerContext.launchOptions[\"BASEURL\"] = AppDelegate.TVBaseURL\n        \n        // Standard controller for tvOS Apps based on TVMLKit\n        appController = TVApplicationController(context: appControllerContext, window: window, delegate: self)\n        return true\n    }\n}\n</code></pre>\n<p>First we set two variables with the base URL where to load scripts from, TVBaseURL, and the URL of the bootstrap script, TVBootURL. After we need to implement didFinishLaunchingWithOptions, this method is called on Application start and here we did two logical operations:</p>\n<ul>\n<li>Create a TVApplicationControllerContext used to load JavaScript</li>\n<li>Create a TVApplicationController, passing to it the previous TVApplicationControllerContext, to handle Application lifecycle\nThat’s all we need for the native part of our App, now it’s time to move to the JavaScript side.</li>\n</ul>\n<h2>The JavaScript side</h2>\n<p>Native part of App loads a simple JavaScript, creates a new folder in the root of the project where to put the code. Call it “js”, now creates a app.js file and put the following code in it.</p>\n<pre><code>App.onLaunch = function(options) {\n  var menu = mainMenu(); \n  navigationDocument.presentModal(menu);\n}\n \nvar mainMenu = function() {\n  var tvmlCode = `&#x3C;?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n   &#x3C;document>\n   &#x3C;mainTemplate>\n      &#x3C;background>\n         &#x3C;img src=\"https://c1.staticflickr.com/7/6050/6350327968_33f008d9c2_b.jpg\" />\n      &#x3C;/background>\n      &#x3C;menuBar>\n         &#x3C;section>\n            &#x3C;menuItem>\n               &#x3C;title>PLAY&#x3C;/title>\n            &#x3C;/menuItem>\n            &#x3C;menuItem>\n               &#x3C;title>SCENES&#x3C;/title>\n            &#x3C;/menuItem>\n            &#x3C;menuItem>\n               &#x3C;title>EXTRAS&#x3C;/title>\n            &#x3C;/menuItem>\n         &#x3C;/section>\n      &#x3C;/menuBar>\n   &#x3C;/mainTemplate>\n&#x3C;/document>\n`\n    var parser = new DOMParser();\n    var menuDoc = parser.parseFromString(tvmlCode, \"application/xml\");\n    return menuDoc\n}\n</code></pre>\n<p>As I already wrote JavaScript is the real core of our application. <code>App.launch</code> is the entry point of the code, it’s called when the script is loaded by <code>TVApplicationController</code>. In launch there is a first interaction with TVJS API, <code>navigationDocument</code>. This object is used to present views on the screen in few different ways, it’s something comparable to <code>UINavigationController</code> if You wrote some native code for iOS.</p>\n<p>The code is pretty simple, launch method calls mainMenu function, this function uses DOMParser to make a document object starting from a TVML template. The interesting part is tmvCode variable which contains TMVL code to make the user interface. TVML is a custom XML which defines the UI elements, it starts alway with <document> element and contains many different children elements who renders on the screen in different ways. In our simple case we used <background> to put an image on the background and <menuBar> for the menu on the bottom of the screen (menuBar is a complex element with a three of children for define the inside items). A full documentation of TVML is available on <a href=\"https://developer.apple.com/library/tvos/documentation/LanguagesUtilities/Conceptual/ATV_Template_Guide/\">Apple Developer Site</a>.</p>\n<p>Now we are ready to try our simple App, in the native part we used an URL to load app.js, so we need to serve this script using a web server. The simplest way to make this is to use python which is installed by default on Mac OS X. Before running the App from XCode launch the Terminal and go in the folder with app.js, from here type the following command</p>\n<pre><code>python -m SimpleHTTPServer 9001\n</code></pre>\n<p>This command runs a simple web server listening on port 9001 serving files from current folder. Started the web server run the App from XCode the App and it’ll be executed on Apple TV simulator or on the real device if connected to the Mac.</p>\n<h2>Conclusion</h2>\n<p>his article is a simple introduction on how simple can be write Apps for tvOS, make real applications it’s obviously more complicated than this. In a future article I’ll describe how to use NodeJS as backend for a TVMLKit App using a template system to handle dynamic TVML generation.</p>\n<p>Source code of the app can be found <a href=\"https://github.com/guglielmino/tvOSSample\">here</a>.</p>","id":"3507272a-3431-5a55-8c9d-4630857503b7","frontmatter":{"title":"Writing Apps for Apple TV for fun and (no) profit","date":"January, 2016","tags":["swift","apple"]},"fields":{"slug":"/writing-apps-for-apple-tv-for-fun-and-no-profit/"}}},{"node":{"excerpt":"Linking iOS App from Web Nowadays almost all web sites  match with a mobile Application. Users jump from web to Apps and back, making this experience as fluid as possibile is becoming really important…","html":"<h1>Linking iOS App from Web</h1>\n<p>Nowadays almost all web sites  match with a mobile Application. Users jump from web to Apps and back, making this experience as fluid as possibile is becoming really important. In this post I’d like to explain the standard approach to this problem and how I get an enhanced solution to it.</p>\n<p><img src=\"/static/d727c5cf1c93072815cb6e58cf5a4096/linkios-image1.gif\" alt=\"Link animation\"></p>\n<h2>Standard approach</h2>\n<p>Before describing the standard approach we need to explain how an iOS App can be launched from a web site and how this is typically used.</p>\n<p>iOS Apps comes with a configuration file named Info.plist who gives all the parameters needed by the iOS runtime to execute the App itself. Some of these parameters are  App name, supported screen orientations, default language and many others. One of these is URLscheme  who is a powerful system to launch the App from outside.</p>\n<p>Looking to a snippet of Info.plist took from my App Pushetta it looks as follow:</p>\n<pre><code>&#x3C;key>CFBundleURLSchemes&#x3C;/key>\n&#x3C;array>\n&#x3C;string>pushetta&#x3C;/string>\n&#x3C;/array>\n</code></pre>\n<p>What this mean? It simply says the App can be executed with a custom url, in this case the url is pushetta://. So first step is now clear, if a web page has a link with this url schema, loading it on a device with the App installed and using the link the App is started. WOW this is great!!! But wait a moment, if the App isn’t installed? Ehm, we get an error.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2ba3da3d1c8344a23391efd1e380856f/c08c5/linkios-image2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 177.5390625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAkABQDASIAAhEBAxEB/8QAGQABAQADAQAAAAAAAAAAAAAAAAMBAgQF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAABouIKDt284VSGAAf/xAAcEAACAgIDAAAAAAAAAAAAAAAAAgERAxITICH/2gAIAQEAAQUCooo0auNiY1lJXS0Mvr9v/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwFf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwFf/8QAHBAAAgEFAQAAAAAAAAAAAAAAAAERECAhMkGR/9oACAEBAAY/Aqyc9IYpZsYv/8QAHRAAAwABBQEAAAAAAAAAAAAAAAERURAgQWGRcf/aAAgBAQABPyHwfRInLCj70B/IEclOZFiejqjVTf8A/9oADAMBAAIAAwAAABAQBzwAD//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QX//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QX//EABwQAQADAAIDAAAAAAAAAAAAAAEAESExQSBR8P/aAAgBAQABPxDXxg92jyVAL7uGkOJSQZAsuACNRoF1dyswUTCbAtuD3zi8VAsb8LlvvuC7s//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Link animation\"\n        title=\"Link animation\"\n        src=\"/static/2ba3da3d1c8344a23391efd1e380856f/c08c5/linkios-image2.jpg\"\n        srcset=\"/static/2ba3da3d1c8344a23391efd1e380856f/36dd4/linkios-image2.jpg 512w,\n/static/2ba3da3d1c8344a23391efd1e380856f/c08c5/linkios-image2.jpg 640w\"\n        sizes=\"(max-width: 640px) 100vw, 640px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Error is self explaining, we tried to open an url Safari doesn’t understand. This freezes our initial enthusiasm.</p>\n<p>The standard solutions comes in mind is to check if the App is installed before running the custom url. BEEEEEEEP!!! This isn’t possible! For (obvious) privacy problems a web page can’t inspect the device to known if a specific App is installed.</p>\n<p>Ok, so we are at dead end, we know how to execute the App from web page but we don’t know how to be sure is installed before this.</p>\n<p>Some clever people made a work around to this problem with a trick based on JavaScript setTimeout function. The idea behind the solution is: we start a timer that when expire executes a function whose redirects the user to a predefined url (it can be for example a landing page with info about the App and a link to the store). Right after the start of the timer the script try to launch the App with the custom url, so we get two scenarios:</p>\n<ul>\n<li>App is installed: it runs and the timer never fires (this because running the App brings the user outside the browser)</li>\n<li>App isn’t installed: we get the error but after awhile we get redirected to a predefined page</li>\n</ul>\n<p>The code for this solution is</p>\n<pre><code>   setTimeout(function(){\n                window.location = \"http://www.pushetta.com\";\n              }, 1000);\n   document.location = \"pushetta://\";\n</code></pre>\n<p>The code make exactly what we described: it sets a timer function that after one second (1000 milliseconds) redirects the user to <a href=\"http://www.pushetta.com\">http://www.pushetta.com</a>. Next it tries to run pushetta:// custom url scheme and this implies the two scenarios described.</p>\n<p>This is a pretty poor solution, it works but with a bad user experience. This is where I started to look for a better solution, googling around wasn’t productive so I decided to make some tries. My starting point was: I can’t check if the App is installed but if I could handle the error on opening a wrong url this would be enough to resolve the problem. This is simplest to say that to do, window.location gives an error when we try to open a wrong url but it seems not trappable by code. So how can we do? The solution I used is based on a iframe. As many know an iframe is something like an hole (squared) inside the page who loads another url, the idea is: if I create an iframe in the DOM with it’s src set to the custom schema, will it show the error popup when the schema is wrong (ie the App is not installed)? Luckily enough this doesn’t happen and so we can implement the right solution based on this behaviour.</p>\n<pre><code>// timer func to bring the user to a web page if App isn't installed\n   setTimeout(function(){\n            document.location = \"http://www.pushetta.com\";\n        }, 1000);\n\n   // put an iframe in the DOM with \"pushetta://\" as src (and 0x0 dimensions)\n   ifrm = document.createElement(\"IFRAME\"); \n   ifrm.setAttribute(\"src\", \"pushetta://\"); \n   ifrm.style.width = 0+\"px\"; \n   ifrm.style.height = 0+\"px\"; \n            \n   document.body.firstElementChild.appendChild(ifrm);\n</code></pre>\n<p>The solution seems to work well but I consider it a test to be verified with various scenarios.</p>","id":"8a5e66e5-3698-592f-980e-94c66a54fafc","frontmatter":{"title":"Linking iOS App from Web","date":"July, 2015","tags":["apple","swift"]},"fields":{"slug":"/linking-ios-app-from-web/"}}}]}},"pageContext":{"tag":"swift"}}}
{"componentChunkName":"component---src-templates-tag-js","path":"/tags/python/","result":{"data":{"site":{"siteMetadata":{"title":"Gumino.com","author":"Fabrizio Guglielmino","labels":[{"tag":"raspberrypi","tech":"Raspberry Pi","name":"DiRasberryPi","size":20,"color":"orange"},{"tag":"React","tech":"React","name":"DiReact","size":20,"color":"deepskyblue"},{"tag":"nodejs","tech":"Node.js","name":"DiNodejsSmall","size":20,"color":"lightgreen"},{"tag":"git","tech":"Git","name":"DiGitMerge","size":20,"color":"white"},{"tag":"javascript","tech":"JavaScript","name":"DiJsBadge","size":20,"color":"yellow"},{"tag":"css","tech":"CSS","name":"DiCss3Full","size":20,"color":"teal"},{"tag":"python","tech":"Python","name":"DiPython","size":20,"color":"deepskyblue"},{"tag":"ruby","tech":"Ruby","name":"DiRuby","size":20,"color":"crimson"},{"tag":"java","tech":"Java","name":"FaJava","size":20,"color":"wheat"},{"tag":"angular","tech":"Angular","name":"DiAngularSimple","size":20,"color":"red"},{"tag":"html","tech":"HTML","name":"FaHtml5","size":20,"color":"darkorange"},{"tag":"php","tech":"php","name":"DiPhp","size":20,"color":"violet"},{"tag":"mongodb","tech":"MongoDB","name":"DiMongodb","size":20,"color":"green"},{"tag":"vscode","tech":"VS Code","name":"DiVisualstudio","size":20,"color":"deepskyblue"},{"tag":"linux","tech":"Linux","name":"DiLinux","size":20,"color":"deepskyblue"},{"tag":"apple","tech":"Apple","name":"DiApple","size":20,"color":"white"},{"tag":"swift","tech":"Swift","name":"DiSwift","size":20,"color":"white"},{"tag":"android","tech":"Android","name":"DiAndroid","size":20,"color":"white"}]}},"allMarkdownRemark":{"totalCount":3,"edges":[{"node":{"excerpt":"VoCore as smart sensor Some days ago I received my VoCore, this device is amazing it’s a full embedded Linux device with  OpenWrt, WiFi and Ethernet on board and many I/O (i2c, GPIO, SPI, UART…","html":"<h1>VoCore as smart sensor</h1>\n<p>Some days ago I received my VoCore, this device is amazing it’s a full embedded Linux device with  OpenWrt, WiFi and Ethernet on board and many I/O (i2c, GPIO, SPI, UART, ..). Its main strengths are size and WiFi on board. About size look at the following picture.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 600px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/067103f6575038e74ec26eccc1e58000/b4294/vocore-image1.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 133.3984375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAbABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAQL/xAAVAQEBAAAAAAAAAAAAAAAAAAADAf/aAAwDAQACEAMQAAABW9Gg9RodiuQ5L2dhz//EABsQAAICAwEAAAAAAAAAAAAAAAERAAIQEyFB/9oACAEBAAEFAtoeOILZKhSgFRjwT//EABYRAAMAAAAAAAAAAAAAAAAAAAECIP/aAAgBAwEBPwEtH//EABYRAQEBAAAAAAAAAAAAAAAAABARMf/aAAgBAgEBPwGUw//EABsQAAEEAwAAAAAAAAAAAAAAABEAARAhICKB/9oACAEBAAY/Atmm0wHIpHH/xAAeEAADAAEEAwAAAAAAAAAAAAAAARExECFBYVFxkf/aAAgBAQABPyG0wF9FgrLSmKx0k8Wmz33pJOXJt4qZ3gzj7MD/2gAMAwEAAgADAAAAEIsAcf/EABcRAAMBAAAAAAAAAAAAAAAAAAEQESH/2gAIAQMBAT8QkYpi/8QAGBEAAwEBAAAAAAAAAAAAAAAAARARITH/2gAIAQIBAT8QE7xHFX//xAAcEAEBAQEBAAMBAAAAAAAAAAABEQAhMUFRkbH/2gAIAQEAAT8QfSs9To4dEQPRG3P6ZtEoi4X5dMGSJIPp/WKlDmROlevDUKz5TrjpEC2GJZMfqtzv/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"VoCore size\"\n        title=\"VoCore size\"\n        src=\"/static/067103f6575038e74ec26eccc1e58000/b4294/vocore-image1.jpg\"\n        srcset=\"/static/067103f6575038e74ec26eccc1e58000/36dd4/vocore-image1.jpg 512w,\n/static/067103f6575038e74ec26eccc1e58000/b4294/vocore-image1.jpg 600w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>For a maker a device like this is awesome, combine connectivity and power in a so small size can open infinite possibilities but the first that comes to mind is smart sensors.</p>\n<p>Smart sensor is a generic term, my own interpretation is about a device can acquire some physical data, elaborate it and communicate over the internet. What I’d like to present in this post is a simple use of VoCore as smart sensor.</p>\n<h2>Configuring OpenWrt</h2>\n<p>Before starting we need to configure OS, I chose to use Python for implementing the smart sensor logic.</p>\n<p>VoCore is shipped with a release of OpenWrt doesn’t carry Python, so here the step to install it, I skip basic VoCore setup because can be found on VoCore site. Next steps assumes You are able to connect via ssh to VoCore and it has a internet connection enabled.</p>\n<p>OpenWrt uses a package manager called opkg, like many others it uses a list of repositories urls where look for packages. These urls are defined in /etc/opkg.conf and in default configuration isn’t present the repository for python.</p>\n<p>So first step is to add a new repository url, add the following line to the end of <code>/etc/opkg.conf</code></p>\n<pre><code>src/gz cheese_packages http://downloads.openwrt.org/snapshots/trunk/ramips/packages/packages\n</code></pre>\n<p>After this we need to update opkg cache with following command</p>\n<pre><code>root@OpenWrt:~# opkg update\n</code></pre>\n<p>And finally we are able to install python</p>\n<pre><code>root@OpenWrt:~# opkg install python\n</code></pre>\n<p>Ok, less is done 🙂</p>\n<h2>Making the sensor</h2>\n<p>Now it’s time to work on hardware, what I’d like to make is a simple intrusion detection system that sends a push notification when someone get in the room. To send push notification I’ll use Pushetta, a service I made specifically to solve this task.</p>\n<p>A PIR sensor is used to detect movements, this kind of sensor use infrared radiation to detect temperature changes in a specific range.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 150px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/719c42509c585a0ab9a2c1098b43c27d/8a4e8/vocore-image2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAADGElEQVQ4y42V709TVxjH+y/sja+WvdMX2xszfWFizEyUbNGoifJiwcWMLFOWRTeMJr7wByYqmUGRYUfxQlv6C2p/0B+0/G6Ray2zzKgRSyRxI9FlsVQnA4S2t5/dW2i5lKI8yZNz7rnP8znfc885z9WwHssuOap2DdOsys1mc67uF3tx3JrA9SR8KGYVUN0q9m5ujmQiwdSrBO9m50rGquM1pWZVLJVKMRGP87soIg4M5lzpTzyNk1pYWFOARg2TJKkAG41GudvfT0wcZjQSIRa5R+TOMOLgIA/ux5hXQdUMTfESFHv+bIKBQIB7oRARGRCV25Gw3JdbMTRIqLeX8fh4LjaTyawAa/LKMlmJ5FSS8bGnRMNh+ruCBDs9BFxu+nx+wt3dhHu66QsEZWAfd+QJ3s7OrIJqpKxUUBYdFrltsdLr9+N3eTAbTFgEI167iz6vj5Csutvnw9vpJejvos4q8OJNIpebXoLmFPY+EDlUd5La+it0tnfgdjiwWe20tJoQdAaMggw22rCaOjBbOmi/7cLr8WAxmznbUs/k1N+FPcgBh2J3+ahiOzsPH+BizVnsFhsGWV1TUws3tS003pRdq0erMyLoLVjb7TidTgZ6+nH5vJSd/55Hfz1bVJiXqjXcYlNFGV9VlnOptoZ2Bao30qwT0DW3IrS2YZHVuRxuurxe3E4HeoPAhas1fHxwG0drq5eA6XSu03ztFlt27GTjd19y6NuvEeobCMjfskfehKD8/brcndhtZm401PHz6RNUnfqR6stnaDDpGHl4n+npfxc3Jb9Dzg4Pn234nPJjlWyu2seeHypo0jZy7fovHD9Xzf6qw+zYu5svdu9Cb2rjn6lEyWupyZ+/jJQhmXzNH2KMsooDbD6yi29+quTSr7U4wgHqGxuwGU2MDg2tACiClNwVB1t5kDKLx2fs4RiffrJVXtpvK2Z/82KSV5N/8vL5BAvz84sVrfjKZllWmH+ZTqd48jjOf9OzhUMryeNvXyeZm5kpXM91ly+1qZPfF1cSqFaqLL+4kqxVZD9csSmdtDz2/n/A/zVDlXq2fvqUAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PIR sensor\"\n        title=\"PIR sensor\"\n        src=\"/static/719c42509c585a0ab9a2c1098b43c27d/8a4e8/vocore-image2.png\"\n        srcset=\"/static/719c42509c585a0ab9a2c1098b43c27d/8a4e8/vocore-image2.png 150w\"\n        sizes=\"(max-width: 150px) 100vw, 150px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>PIR sensors are cheap and really simple to interface with a microcontroller, there are only three pins. Two are VCC and GND and the last one is the OUTPUT.</p>\n<p>In the following video I show how it works, I’m using a portable oscilloscope connected to the PIR sensor. As You can see when something move in sensor’s range output level goes high (+5V) and return low after a while.</p>\n<p><a href=\"https://www.youtube.com/watch?v=0LSoy9gvT6g\"><img src=\"https://img.youtube.com/vi/0LSoy9gvT6g/0.jpg\" alt=\"IMAGE ALT TEXT HERE\"></a></p>\n<p>What we want to do is read PIR output and send a push notification when it changes to high.</p>\n<h2>Sending notifications with Pushetta</h2>\n<p>To send notification we’ll use a web service I made called Pushetta, this is made of a web site and two Apps (one for iOS and one for Android).</p>\n<p>First we need to register on <a href=\"http://www.pushetta.com\">Pushetta</a> web site, it’s free and it’s a mandatory step to be able to send notifications.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 500px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/04ab87031f59627699db13c04cad29de/0b533/vocore-image3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABcUlEQVQoz5WSTU7DMBCFfRikFm6A4BBcj78FSGw4AEnKCirBgkVZIJVl101KSNzYTlw9M+MmaWhTJCJ98c+89xR7IgbjSxyNr3D2do/T11scPJ1j+HyBQc2Q6n2w75A4frnBCfk4g/eEsRWY70JiqVWLVAXSPIOuSl831Vq3jaK6smW7FsWyAKP8uHTNmubQShEaRntcs7/RrH2q4xGSXrvQ19KYJAniOMZ8PvfwXlEU6PesESRyLKzxcyklNB37czrF+2SC2WzGgU7TV5Zl6UO7+q5fbG20sOkrTZEsFjRXsKuVMxSmza9A/Cswl2SkMG0qH6RLagKNy/2B+DOQR0WNqajDDVtH7g3cucP28ukuFXWYQwjXBvbo2yNnWQYmz3M0c4bDUrpD7rKkGjfpbrrA9UeMjNZ5vtF2vcI5h87jF7zHWP6ZjYG1FtXKuliVSHTlZbXPNdoaJ6Iowj7CMEQQBJ6HIHCjKMTjqK71eUj/A+aHdZ0XzqubAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Pushetta signup\"\n        title=\"Pushetta signup\"\n        src=\"/static/04ab87031f59627699db13c04cad29de/0b533/vocore-image3.png\"\n        srcset=\"/static/04ab87031f59627699db13c04cad29de/0b533/vocore-image3.png 500w\"\n        sizes=\"(max-width: 500px) 100vw, 500px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>After signup process we need the API key, this is the key used to call Pushetta service and send notification, it’ll be used in code we’ll write after.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 500px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/14b98e4f586a337c460333c40ec6f8b1/0b533/vocore-image4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.599999999999994%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB6UlEQVQoz42S227TQBCG/QA53JInoPSKay55B56uSEhccMU7gJoDTdMnIE4apYocmsTH9Z5s/9uZNbhBQqhxPu2//8yOZ1YOPtx9de/nX/B6fIXL8Ue8OePi+qrTlxNaz+D9BfnvZp/xdvrJaz4fbKMdTlmKUkmPkGWrtUIhBQTpmOK6sjCEPoP3sjKtritPUOcxbBHDyBRG5TCmgGVIW5WhsQKoSlRa/pOasIryZUbkCHZ7hXBT4ueqwHIrsYo0lrvWW20EHqIa0cGhbhyccwDOcK1ndAldJkSKoBTaicJCFAZZqpAlEnlG4+aGfcdrmkpoRV0a6shqNLVxvFoqZKlDQ51xMUNdBnl6QhI/UoGYErXH6oKKtj5jtUBDd6XKnPZHHA+P9PIYNXkVFTY0clcwiiJstw+UmLYjETVd8np9j/X9Bvv9LyilfYwPh2GIZbjC6RR7j7F+5N8Fm6bpAqzpTwcNrLWdzw/HfDfG/JXPP57geeTk6LLkACno06CRNN2HLBKwl9K4ZZ44VWZg/uRI0epnP6EzsSfQ9GnURtAbqaNGwdVEo73nfZg29l+qjuDHzRiL2ykWN1PMJt8xHX/DfHaNu9uZZzHn2OTFBKPRyI1ejTAcDtHv9zEYDPza6/WIPmvH+5fyBL+jRg2dXl+zAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Pushetta API Key\"\n        title=\"Pushetta API Key\"\n        src=\"/static/14b98e4f586a337c460333c40ec6f8b1/0b533/vocore-image4.png\"\n        srcset=\"/static/14b98e4f586a337c460333c40ec6f8b1/0b533/vocore-image4.png 500w\"\n        sizes=\"(max-width: 500px) 100vw, 500px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Last step is to create a channel. Channel is something like a topic used to send notifications. User want to receive notifications have to subscribe channel interested in, using <a href=\"http://www.pushetta.com/pushetta-downloads/\">Pushetta Apps</a>. More informations about how Pushetta works can be found on <a href=\"http://www.pushetta.com\">www.pushetta.com</a>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 500px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/05bf183cbfa4d06dea8540c20bbd18d5/0b533/vocore-image5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.39999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABxklEQVQ4y41TS24UMRDtMyVIrDkDF+BeLJhEQmzCJhLKmsUMbJAQi4iIKCELiJKebv/a3+5+psrT81NGCraequyqeq6yy9Xrbx/x5vs5Xn45xdFihuMJR/N3e/J4PsOLxckTcMyrr+8LWK+0t2iMQkwRMQZ470jGIlOf4JxFCB7GaIw8x4Ew7iHRXir7A6rQSej2EUbWMKJGp5ZwpoU1gjBJ3ZY9T3pBJ7b6ek2IVqFypDTLR7RNjWX9gD4FoI/I0SInt0EfLLzrEPwhsM3AW4kqkWPOGSmlIj9dnOPs8xwnNxGnPxVmVxpvLxV+NLHYR+QiN5jWXHp0lGGkE8iLtlEM1ze/cH33G7dLjb/a48Em3HcRXRyKDwceGuMwIDBhIkL2sZbS9h593yPRo2S64F1wANsYT0nzlpAz5LRDCIVQa0UvauBId86VgxisF1j3POE2b5TshmG/NdY2TCX/HyE5cZbWeeq/VVnDVOYu4aHBFXIPEmHelDxOhOvXW7mt5nMj72doslQqSylzK2T+cFljcdfAKgkhNshCkpSrtVzrFMNxQohMPylHrzlDasjpwvnyr2qDP5Kb1W0fwrm8ox9E+bJO4x8fO9h5ofRzwAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Channel creation\"\n        title=\"Channel creation\"\n        src=\"/static/05bf183cbfa4d06dea8540c20bbd18d5/0b533/vocore-image5.png\"\n        srcset=\"/static/05bf183cbfa4d06dea8540c20bbd18d5/0b533/vocore-image5.png 500w\"\n        sizes=\"(max-width: 500px) 100vw, 500px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Now we are ready for the last step: connect PIR sensor to VoCore and write a few lines of Python code to handle all the logic.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 600px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cc7a2e267d5c674481a501f7d6ebd40e/0a47e/vocore-image6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.6640625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAACmGAAAphgEi7N+MAAABUElEQVQoz51Sa4+CQAzk//88ieYiuidwn8hJZHntczimZo0Y/XJNml1KO512NsM/zRqLcRwxTROMMZjnGc45ZJ8KQggPjzE+fFkWKd7lO9Q/Neq6xuFwQJ7nOJ/P7wFZyCJrrTg7e+eFifMO7bXF/rgXcHqysizvgOnHcjcB9N4/knnym2x5n8YJ6lvJnbFE4nK5IOOFDBKTlMDvlCgg84S+7xFigO61FCdA5vAUQK01uq7DMAxy3m43cevshuFsZlkDz+a3wVEdnycTl5HZlUoRmEHdaXwVX7B+ZRghwHHtTobMYw53SREoCFlVVQWlFIqiQEZmDDKB4OMw4qROK5CRQj1oBB/QXBthl1iTLZ9NcuLIs+GYDCRF27ZFWZUwKyCFoLrcDwvSfl+E3HjGMQhKdhybC09qPhcTnMt/fV6vlr3rIsmIG5WHcdiM/Mn+AAaGWCw0zasbAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Schema PIR – VoCore\"\n        title=\"Schema PIR – VoCore\"\n        src=\"/static/cc7a2e267d5c674481a501f7d6ebd40e/0a47e/vocore-image6.png\"\n        srcset=\"/static/cc7a2e267d5c674481a501f7d6ebd40e/01e7c/vocore-image6.png 512w,\n/static/cc7a2e267d5c674481a501f7d6ebd40e/0a47e/vocore-image6.png 600w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>In the picture there is the schematic used for our experiment. Connecting PIR sensor is really simple, I used GPIO0 as input in the VoCore module. Whit this circuit GPIO0 is put to low when PIR signal is up and vice versa. Must be taken into account that PIR sensor require +5V as power source, on VoCore can be used USB+ pin.</p>\n<p>Before writing full Python program is better to test that everything is working as expected with a simple shell script, first step is login on VoCore via ssh and change directory to GPIO0 sys filesystem as follow.</p>\n<pre><code>root@OpenWrt:~# cd /sys/class/gpio/\nroot@OpenWrt:/sys/class/gpio# ls\nexport      gpio13      gpio18      gpio21      gpio24      gpio7       gpiochip0\ngpio0       gpio14      gpio19      gpio22      gpio25      gpio8       gpiochip22\ngpio12      gpio17      gpio20      gpio23      gpio26      gpio9       unexport\n</code></pre>\n<p>If we see an output like the one above we are in the right place and next step is to change dir  to gpio0.</p>\n<pre><code>root@OpenWrt:/sys/class/gpio# cd gpio0/\nroot@OpenWrt:/sys/devices/10000000.palmbus/10000600.gpio/gpio/gpio0# ls\nactive_low  device      direction   edge        subsystem   uevent      value\n</code></pre>\n<p>Two files are important for us, <strong>direction</strong> is the first one. We need to put the string “in” inside to this to set GPIO0 in input mode (we need to read from it). The other one is value, <strong>value</strong> is 0 when GPIO0 is low and 1 when high.</p>\n<p>Coming to the script we can use the one below, it simply read value every second.</p>\n<pre><code>while  [ 1 ]\ndo\n  cat value\n  sleep 1\ndone\n</code></pre>\n<p>Executing it console shows something like:</p>\n<pre><code>1\n0\n0\n0\n0\n0\n0\n1\n1\n1\n0\n0\n1\n</code></pre>\n<p>0 mean PIR is sensing motion, else nothing is moving around it, all works fine!</p>\n<h2>Becoming a smart sensor</h2>\n<p>Now the code, I found an already made wrapper for interacting with GPIO made by Stefan Wendler and to not reinvent the wheel I use this, is called DigitalIO and I put it on github with all the code of this article.</p>\n<p>This wrapper makes really simple to read GPIO status, with the following five line of code we can print on console the GPIO status read every half second (something like we made with shell script).</p>\n<pre><code>pin = DigitalIO.get_input(GPIO0)\nwhile True:\n    read = pin.state()\n    print \"GPIO0 state = \" + str(read)\n    time.sleep(0.5)\n</code></pre>\n<p>Last piece of code we need is the one used to send the notifications, we make a function to solve this task later used in final code.</p>\n<pre><code>def sendNotification(token, channel, message):\n    data = {\n        \"body\" : message,\n        \"message_type\" : \"text/plain\"\n    }\n\n    req = urllib2.Request('http://api.pushetta.com/api/pushes/{0}/'.format(channel))\n    req.add_header('Content-Type', 'application/json')\n    req.add_header('Authorization', 'Token {0}'.format(token))\n\n    response = urllib2.urlopen(req, json.dumps(data))\n</code></pre>\n<p>With all piece in our hands it’s time to assemble all together and make real our smart sensor.</p>\n<pre><code>pin = DigitalIO.get_input(GPIO0)\nwhile True:\n    read = pin.state()\n    if read == 0:\n       print \"Something move\"\n       # NOTE: API_KEY and MYCHANNEL name must be updated with values\n       #       created in pushetta web site in the previous steps\n       sendNotification(\"API_KEY\", \"MYCHANNEL\", \"ALARM!!! Something move\")\n    else:\n       print \"No motion\" \n    time.sleep(0.5)\n</code></pre>\n<p>Isn’t a “production ready” software but a good starting point to make the real one. A small problem with this code is it send a push notification for every motion it detects. This can generate many notifications and Pushetta protects for this problem blocking requests if these are too frequent. This can be simply addressed recording last notification sent and send another one only some time has passed, I leave this as an exercise for the reader.</p>","id":"e594e979-7f3a-5368-af49-af03dd3e96fa","frontmatter":{"title":"VoCore as smart sensor","date":"January, 2015","tags":["linux","python"]},"fields":{"slug":"/vobore-as-smart-sensor/"}}},{"node":{"excerpt":"Making a simple Robot Making a robot is a big challenge, also when You say to yourself “I make only a simple robot” simple will be not so simple. I started making the “simple robot” mainly because I…","html":"<h1>Making a simple Robot</h1>\n<p>Making a robot is a big challenge, also when You say to yourself “I make only a simple robot” simple will be not so simple.</p>\n<iframe width=\"625\" height=\"469\" src=\"https://www.youtube.com/embed/c-B3EiIwta8\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n<p>I started making the “simple robot” mainly because I like to make things, and I like more to make things that move. For the first version I decided to concentrate my efforts in electronic and software, for this I bought a cheap robot platform for mechanical platform (this one).</p>\n<p>I gave to myself some goals:</p>\n<ul>\n<li>Make a WiFi connected robot</li>\n<li>Make use of websockets for the control interface</li>\n<li>Make the robot speech</li>\n<li>Use some simple form of shape recognition</li>\n</ul>\n<p>I made many projects based on Arduino but this time I looked for something more powerful, looking in my “stuff drawer” I found a beaglebone (white one) and I choose her for the brain of the robot.</p>\n<p>BeagleBone is an incredible platform, it can run various OS like Arch Linux (default), Ubuntu and many others. One thing that made BeagleBone a little “special” compared to others it’s expansions capabilities (65 GPIO, 8 PWM, 7 Analog input, …) and a feature I found only in this board : PRU.</p>\n<p>PRU is acronym for Programmable Realtime Unit, BeagleBone has two of them. Essentially PRU are autonomous chip with a specific assembly instruction set capable of performing realtime task, they run separately from main OS but can communicate with it using shared memory.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 686px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ec19f6738ab9488c9ebb84099343f91a/f6386/robot-image1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.3828125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB0ElEQVQoz2VSi5KiMBD0/z9MLJArUYQFFgggQQIoyyM8VO46sLtq3VhSeUx3z/Rk9fe/mKYppjRJEs/zgiBwPZ9S+nt7u93qur7f71ivXmGPnwAe/1c6ZAOGdZFniiz3w/gGXiibOTjnXddlWXa9Xvu+5y9RZEyRlScYxLxttd2OkODDND8sq+Uc5+M45nm+CC4xjOMMlsH9BHeco8MwCAgRHZ6TJE1TsTifaUyxRhXDMGR5HgZkI21QogBPc29dx23Lti1rr2mO83k86o5tG4bJGAOpLMtRGCGtaVqQbRXlqVyWZQqFJEGH2FZVpaoqDpcrz3U3koRbUfYwZiyFwHib3UY9dVWjPMwG3ziOoQa/YC9sP51OjuNI6zUWyO6HIWdM3W75bMoK9ZTl1xLAh2EIk8SoHg/g4YHj2PrhAOJJKA+XIjcNE869GWZZaNrWdd31PJ+In/MpoiiKtm3Be9jvoyjKMvZHVbEFarWMBGUQQnAHZZis7TR80xQdMLSNKhJKpbUEC9Gfosh4gd/KCY3B6hOymIT6j7oO88CNEyjjncAOUPu+D29Mw4Ap3+CmrrHHPC+XC6xGNvLEhCmFsnjergsju65fCkFUX1XbNP8AHTfTL0dIXvoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PRU-ICSS\"\n        title=\"PRU-ICSS\"\n        src=\"/static/ec19f6738ab9488c9ebb84099343f91a/f6386/robot-image1.png\"\n        srcset=\"/static/ec19f6738ab9488c9ebb84099343f91a/01e7c/robot-image1.png 512w,\n/static/ec19f6738ab9488c9ebb84099343f91a/f6386/robot-image1.png 686w\"\n        sizes=\"(max-width: 686px) 100vw, 686px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>PRU are essential to make tasks with high precision time constraints, like make a pulse wave modulation or, as in my case, to read short pulse from a <a href=\"http://learn.parallax.com/kickstart/28015\">PING)))</a> sensor.</p>\n<p>PING))) sensor from parallax is cheap and theoretically really simple to use, this is true for example with Arduino but using it with BeagleBone make things a bit more difficult. This sensor works emitting an ultrasonic signal when the board send a short signal on trigger pin (40Khz), to misure distance board have to read the echo response duration. Here is where things get complicated.</p>\n<p>Using a GPIO to read an hight frequency signal and pretend to precisely measure it is really optimistic. Isn’t a hardware problem but more a software one. GPIO on BeagleBone are handled by operating system (Linux), this is not a realtime OS so software scheduler can’t grant a precise response time to an hardware event.</p>\n<p>In a next post I’ll show how to use PRU in BeagleBone, stay tuned!</p>","id":"e9c964c7-49ee-5443-99e2-26abf7bfb5c1","frontmatter":{"title":"Making a simple robot","date":"November, 2013","tags":["python"]},"fields":{"slug":"/making-a-simple-robot/"}}},{"node":{"excerpt":"A Raspberry PI based Arcade Word “videogame” is for me a big piece of my youth. I spent many hours playing with arcade games when I was young and many of them are still impressed in my mind. For other…","html":"<h1>A Raspberry PI based Arcade</h1>\n<p>Word “videogame” is for me a big piece of my youth. I spent many hours playing with arcade games when I was young and many of them are still impressed in my mind.</p>\n<p>For other like my grew up in the 80s a screen like this:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 256px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/86c58597f3714b74b948730c6adad572/6f3f2/arcade-image1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 93.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAAsSAAALEgHS3X78AAAC40lEQVQ4y2NgoARI8kurimqoimr6m0Wkuhf5m0WqimhoSOhoSehLCcgK8YpoSupqiOsARcCkrpqopomiVbhNkryIMsOL9n/zYtdWuDU3+fa3+k9q9u2v9eys8eho85vsbxxhpm7b7Duh1quzzrOrzqsLRIIY3e2BU+81fmZ41/vfXdMP6ARmJmZiXMoIhAwMnKxc1+vfMrzv/u+pEwjkszKzMTEygxATM1AFJw+vrJqWiISAqpkstyAHIwMTRJaZkQWomJuN90YtUHPvf2/tICAfqIeJkYmFiQWIWIE0K5uGpr6eiqKikSS/BA8zAzNQnBlsLlAxLzvfjQawzW5avmQ4+0bdW4bXXf+7A2dqSeoDhYxkzeMsMiJNEiNNk6JMkoBkhElilBmIHWGaGGuWBvGgGK9komXW3ebPDG86/7cHTFEX1waK6kkbRxgnBhlGBxvEBBvFhBjEhBjFgNiGQDI6zDjBVcMHqEyURzzaNAUU2m97/ruoe5PsbDZwaANtrvXuUhBSAgppiGt76wa5afq6a/mhI01fb51AWxVHoDJBTmF//bC7jZ8YXnX9nxq+GOhboKiFkl2OfVmKdX6adUGaTQGIhDFSrfPTbYp99aPBiVIm16HiXvMXhndd/100CTibEeRSBiEZRgt7Rgbk0H7b/T/LroSfUwBkJJ+0voyJjqSBrrShrqQhiJSCkpriBra6Fj62pkBlXKzcpvJWtxo/MLzq/L84YYudiitQ1Fndq8Grt9ytudKttcK9FUhWwkiwYGesaQ5QmbywUoNXz4PmbyCbgSEEcjYzMBUx4HE5xPHw0L5a+4rha///YKMoIN9GSXJ+pD47Cw8vBy8POwLxcfIxMXA4u6knlroDGUBZDhYOUR6xRy3vGOp8ukvdGzsDZk4Jnbo+YXqb39QOf3TU5jt1YvzkOZmzgQwgt91/amfAtGVJ20AuAeYHVmYWZkZmBkjGYGbBJIH5CehgZBGgRgD6QeY3UkiabwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Bubble Bobblee\"\n        title=\"Bubble Bobblee\"\n        src=\"/static/86c58597f3714b74b948730c6adad572/6f3f2/arcade-image1.png\"\n        srcset=\"/static/86c58597f3714b74b948730c6adad572/6f3f2/arcade-image1.png 256w\"\n        sizes=\"(max-width: 256px) 100vw, 256px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>are immediately are commented out with something like “AHHH!!! Bubble Bobble what a great game!!”. Yes it was and in a nostalgic day I decided to bring these day to a new life.</p>\n<p>Today it’s really simple to play with these old games, You can install MAME in one of it’s flavours and look around for game’s ROM (note: isn’t legal to own ROMS file of games You don’t own). But I was looking for something more, I was looking for reproduce THE FULL EXPERIENCE.</p>\n<p>What I wanted was to reproduce the experience of arcade game and for this was mandatory to make one. So I made a custom arcade game cabinet, indeed I made a miniature version of it.</p>\n<p>In the Internet there are many projects about making a custom arcade machine but I tried to make one from scratch. As hardware platform I used a RaspberryPI with a custom Linux distribution specifically made for this kind of games : PiMAME. I made the cabinet laser cutting some MDF wood, I don’t own a laser cut machine so I made the CAD drawing and I used vectorealism, a really good online service for laser cut and also 3D print.</p>\n<p>First prototype isn’t really cool but making it gave me a lot of satisfaction and experience, this is only a starting point because I’m planning to make a second version with two player support and more attention to aesthetics.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 426px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f4488f7188653eae7232cabfaf494ea9/823c4/arcade-image2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 112.67605633802818%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAXABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAEDBQIE/8QAFgEBAQEAAAAAAAAAAAAAAAAAAQAC/9oADAMBAAIQAxAAAAG+MznN7GaKys2SB//EABkQAAMBAQEAAAAAAAAAAAAAAAECAxIAMf/aAAgBAQABBQI2UOboAaq3WObvXSr406E4oOyR3//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EAB4QAAIBAwUAAAAAAAAAAAAAAAABEQIQQRIhMZLB/9oACAEBAAY/AtPhnqZGxpUWmDg2P//EABsQAQACAwEBAAAAAAAAAAAAAAEAESExQWFR/9oACAEBAAE/Id+FczmoW9EpkFW1xOyBy4LCL2PGWhZd5nBT0YXjI+z/2gAMAwEAAgADAAAAEGv/AP7/xAAVEQEBAAAAAAAAAAAAAAAAAAARIP/aAAgBAwEBPxAj/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAQ/9oACAECAQE/EAAJN//EAB0QAQEAAgIDAQAAAAAAAAAAAAERACExoUFRYYH/2gAIAQEAAT8Q0QoBQ3nu4q0+2h3giEJBTV4H6ZFo0oFswVJbqz7jc2Pg7CnfeShWeDTvFxBulq/lz//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Tabletop prototype\"\n        title=\"Tabletop prototype\"\n        src=\"/static/f4488f7188653eae7232cabfaf494ea9/823c4/arcade-image2.jpg\"\n        srcset=\"/static/f4488f7188653eae7232cabfaf494ea9/823c4/arcade-image2.jpg 426w\"\n        sizes=\"(max-width: 426px) 100vw, 426px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>This is not the end, this is only a starting point. With experience I gave making the first prototype now I planning to make a second device with more ambitious targets:</p>\n<ul>\n<li>Two player</li>\n<li>More powerful board (I’m evaluating many like BeagleBone Black, Phoenix A20,…)</li>\n<li>More attention to cabinet esthetic</li>\n<li>Simple to build, I’m thinking about a system where cabinet can be assembled like an Ikea one</li>\n</ul>\n<p>I’ll post in my blog progress of this second phase.</p>","id":"a92457ce-10dd-5a6d-b206-a04c5b1954d1","frontmatter":{"title":"A Raspberry PI based Arcade","date":"November, 2013","tags":["raspberrypi","python"]},"fields":{"slug":"/a-raspberry-pi-based-arcade/"}}}]}},"pageContext":{"tag":"python"}}}